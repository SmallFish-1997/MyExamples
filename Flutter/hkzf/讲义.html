<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>讲义</title><link href='night/mermaid.dark.css' rel='stylesheet' type='text/css' />
<link href='night/codeblock.dark.css' rel='stylesheet' type='text/css' />
<link href='night/sourcemode.dark.css' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
svg[id^="mermaidChart"] { line-height: 1em; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


.cm-s-inner .cm-variable, .cm-s-inner .cm-operator, .cm-s-inner .cm-property { color: rgb(184, 191, 198); }
.cm-s-inner .cm-keyword { color: rgb(200, 143, 208); }
.cm-s-inner .cm-tag { color: rgb(125, 244, 106); }
.cm-s-inner .cm-attribute { color: rgb(117, 117, 228); }
.CodeMirror div.CodeMirror-cursor { border-left: 1px solid rgb(184, 191, 198); z-index: 3; }
.cm-s-inner .cm-string { color: rgb(210, 107, 107); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(218, 146, 74); }
.cm-s-inner .cm-header, .cm-s-inner .cm-def, .cm-s-inner.cm-header, .cm-s-inner.cm-def { color: rgb(141, 141, 240); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(87, 172, 87); }
.cm-s-inner .cm-hr { color: rgb(216, 213, 213); }
.cm-s-inner .cm-link { color: rgb(211, 211, 239); }
.cm-s-inner .cm-negative { color: rgb(217, 80, 80); }
.cm-s-inner .cm-positive { color: rgb(80, 230, 80); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta, .cm-s-inner .cm-qualifier { color: rgb(183, 179, 179); }
.cm-s-inner .cm-builtin { color: rgb(243, 179, 248); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(132, 182, 203); }
.cm-s-inner .cm-number { color: rgb(100, 171, 143); }
.cm-s-inner .cm-variable { color: rgb(184, 191, 198); }
.cm-s-inner .cm-variable-2 { color: rgb(159, 186, 213); }
.cm-s-inner .cm-variable-3 { color: rgb(28, 198, 133); }
.CodeMirror-selectedtext, .CodeMirror-selected { background: rgb(74, 137, 220); text-shadow: none; color: rgb(255, 255, 255) !important; }
.CodeMirror-gutters { border-right: none; }


:root { --bg-color: #363B40; --side-bar-bg-color: #2E3033; --text-color: #b8bfc6; --select-text-bg-color:#4a89dc; --control-text-color: #b7b7b7; --control-text-hover-color: #eee; --window-border: 1px solid #555; --active-file-bg-color: rgb(34, 34, 34); --active-file-border-color: #8d8df0; --active-file-text-color: white; --item-hover-bg-color: #70717d; --item-hover-text-color: white; --primary-color: #6dc1e7; --rawblock-edit-panel-bd: #333; --search-select-bg-color: #428bca; }
html { font-size: 16px; }
html, body { text-size-adjust: 100%; background: var(--bg-color); fill: currentcolor; line-height: 1.625rem; }
#write { max-width: 914px; }
html, body, button, input, select, textarea, div.code-tooltip-content { color: rgb(184, 191, 198); border-color: transparent; }
div.code-tooltip, .md-hover-tip .md-arrow::after { background: rgb(51, 51, 51); }
.popover.bottom > .arrow::after { border-bottom-color: rgb(51, 51, 51); }
html, body, button, input, select, textarea { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
hr { height: 2px; border: 0px; margin: 24px 0px !important; }
h1, h2, h3, h4, h5, h6 { font-family: "Lucida Grande", Corbel, sans-serif; font-weight: normal; clear: both; overflow-wrap: break-word; margin: 0px; padding: 0px; color: rgb(222, 222, 222); }
h1 { font-size: 2.5rem; line-height: 2.75rem; margin-bottom: 1.5rem; letter-spacing: -1.5px; }
h2 { font-size: 1.63rem; line-height: 1.875rem; margin-bottom: 1.5rem; letter-spacing: -1px; font-weight: bold; }
h3 { font-size: 1.17rem; line-height: 1.5rem; margin-bottom: 1.5rem; letter-spacing: -1px; font-weight: bold; }
h4 { font-size: 1.12rem; line-height: 1.375rem; margin-bottom: 1.5rem; color: white; }
h5 { font-size: 0.97rem; line-height: 1.25rem; margin-bottom: 1.5rem; font-weight: bold; }
h6 { font-size: 0.93rem; line-height: 1rem; margin-bottom: 0.75rem; color: white; }
@media (min-width: 980px) {
  h3.md-focus::before, h4.md-focus::before, h5.md-focus::before, h6.md-focus::before { color: rgb(221, 221, 221); border: 1px solid rgb(221, 221, 221); border-radius: 3px; position: absolute; left: -1.64286rem; top: 0.357143rem; float: left; font-size: 9px; padding-left: 2px; padding-right: 2px; vertical-align: bottom; font-weight: normal; line-height: normal; }
  h3.md-focus::before { content: "h3"; }
  h4.md-focus::before { content: "h4"; }
  h5.md-focus::before { content: "h5"; top: 0px; }
  h6.md-focus::before { content: "h6"; top: 0px; }
}
a { text-decoration: none; outline: 0px; }
a:hover { outline: 0px; }
a:focus { outline: dotted thin; }
sup.md-footnote { background-color: rgb(85, 85, 85); color: rgb(221, 221, 221); }
p { overflow-wrap: break-word; }
p, ul, dd, ol, hr, address, pre, table, iframe, .wp-caption, .wp-audio-shortcode, .wp-video-shortcode { margin-top: 0px; margin-bottom: 1.5rem; }
li > blockquote { margin-bottom: 0px; }
audio:not([controls]) { display: none; }
[hidden] { display: none; }
.in-text-selection, ::selection { background: rgb(74, 137, 220); color: rgb(255, 255, 255); text-shadow: none; }
ul, ol { padding: 0px 0px 0px 1.875rem; }
ul { list-style: square; }
ol { list-style: decimal; }
ul ul, ol ol, ul ol, ol ul { margin: 0px; }
b, th, dt, strong { font-weight: bold; }
i, em, dfn, cite { font-style: italic; }
blockquote { margin: 35px 0px 1.875rem 1.875rem; border-left: 2px solid rgb(71, 77, 84); padding-left: 30px; }
pre, code, kbd, tt, var { background: rgba(0, 0, 0, 0.05); font-size: 0.875rem; font-family: Monaco, Consolas, "Andale Mono", "DejaVu Sans Mono", monospace; }
kbd { padding: 2px 4px; font-size: 90%; color: rgb(255, 255, 255); background-color: rgb(51, 51, 51); border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.25) 0px -1px 0px inset; }
pre.md-fences { padding: 10px 10px 10px 30px; margin-bottom: 20px; background: rgb(51, 51, 51); }
.CodeMirror-gutters { background: rgb(51, 51, 51); border-right: 1px solid transparent; }
.enable-diagrams pre.md-fences[lang="sequence"] .code-tooltip, .enable-diagrams pre.md-fences[lang="flow"] .code-tooltip, .enable-diagrams pre.md-fences[lang="mermaid"] .code-tooltip { bottom: -2.2em; right: 4px; }
code, kbd, tt, var { padding: 2px 5px; }
table { max-width: 100%; width: 100%; border-collapse: collapse; border-spacing: 0px; }
th, td { padding: 5px 10px; vertical-align: top; }
a { transition: all 0.2s ease-in-out 0s; }
hr { background: rgb(71, 77, 84); }
h1 { margin-top: 2em; }
a { color: rgb(224, 224, 224); text-decoration: underline; }
a:hover { color: rgb(255, 255, 255); }
.md-inline-math script { color: rgb(129, 177, 219); }
b, th, dt, strong { color: rgb(222, 222, 222); }
mark { background: rgb(211, 212, 14); }
blockquote { color: rgb(157, 162, 166); }
table a { color: rgb(222, 222, 222); }
th, td { border: 1px solid rgb(71, 77, 84); }
.task-list { padding-left: 0px; }
.md-task-list-item { padding-left: 1.25rem; }
.md-task-list-item > input { top: auto; }
.md-task-list-item > input::before { content: ""; display: inline-block; width: 0.875rem; height: 0.875rem; vertical-align: middle; text-align: center; border: 1px solid rgb(184, 191, 198); background-color: rgb(54, 59, 64); margin-top: -0.4rem; }
.md-task-list-item > input:checked::before, .md-task-list-item > input[checked]::before { content: "√"; font-size: 0.625rem; line-height: 0.625rem; color: rgb(222, 222, 222); }
.auto-suggest-container { border: 0px; background-color: rgb(82, 92, 101); }
#typora-quick-open { background-color: rgb(82, 92, 101); }
#typora-quick-open input { background-color: rgb(82, 92, 101); border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; border-bottom-style: solid; border-bottom-color: grey; }
.typora-quick-open-item { background-color: inherit; color: inherit; }
.typora-quick-open-item.active, .typora-quick-open-item:hover { background-color: rgb(77, 139, 219); color: white; }
.typora-quick-open-item:hover { background-color: rgba(77, 139, 219, 0.8); }
.typora-search-spinner > div { background-color: rgb(255, 255, 255); }
#write pre.md-meta-block { border-bottom: 1px dashed rgb(204, 204, 204); background: transparent; padding-bottom: 0.6em; line-height: 1.6em; }
.btn, .btn .btn-default { background: transparent; color: rgb(184, 191, 198); }
.ty-table-edit { border-top: 1px solid gray; background-color: rgb(54, 59, 64); }
.popover-title { background: transparent; }
.md-image > .md-meta { color: rgb(187, 187, 187); background: transparent; }
.md-expand.md-image > .md-meta { color: rgb(221, 221, 221); }
#write > h3::before, #write > h4::before, #write > h5::before, #write > h6::before { border: none; border-radius: 0px; color: rgb(136, 136, 136); text-decoration: underline; left: -1.4rem; top: 0.2rem; }
#write > h3.md-focus::before { top: 2px; }
#write > h4.md-focus::before { top: 2px; }
.md-toc-item { color: rgb(168, 194, 220); }
#write div.md-toc-tooltip { background-color: rgb(54, 59, 64); }
.dropdown-menu .btn:hover, .dropdown-menu .btn:focus, .md-toc .btn:hover, .md-toc .btn:focus { color: white; background: black; }
#toc-dropmenu { background: rgba(50, 54, 59, 0.93); border: 1px solid rgba(253, 253, 253, 0.15); }
#toc-dropmenu .divider { background-color: rgb(155, 155, 155); }
.outline-expander::before { top: 2px; }
#typora-sidebar { box-shadow: none; border-right: none; }
.sidebar-tabs { border-bottom: 0px; }
#typora-sidebar:hover .outline-title-wrapper { border-left: 1px dashed; }
.outline-title-wrapper .btn { color: inherit; }
.outline-item:hover { border-color: rgb(54, 59, 64); background-color: rgb(54, 59, 64); color: white; }
h1.md-focus .md-attr, h2.md-focus .md-attr, h3.md-focus .md-attr, h4.md-focus .md-attr, h5.md-focus .md-attr, h6.md-focus .md-attr, .md-header-span .md-attr { color: rgb(140, 142, 146); display: inline; }
.md-comment { color: rgb(90, 149, 227); opacity: 1; }
.md-inline-math g, .md-inline-math svg { stroke: rgb(184, 191, 198) !important; fill: rgb(184, 191, 198) !important; }
[md-inline="inline_math"] { color: rgb(156, 178, 233); }
#math-inline-preview .md-arrow::after { background: black; }
.modal-content { background: var(--bg-color); border: 0px; }
.modal-title { font-size: 1.5em; }
.modal-content input { background-color: rgba(26, 21, 21, 0.51); color: white; }
.modal-content .input-group-addon { color: white; }
.modal-backdrop { background-color: rgba(174, 174, 174, 0.7); }
.modal-content .btn-primary { border-color: var(--primary-color); }
.md-table-resize-popover { background-color: rgb(51, 51, 51); }
.form-inline .input-group .input-group-addon { color: white; }
#md-searchpanel { border-bottom: 1px dashed grey; }
.context-menu, #spell-check-panel, #footer-word-count-info { background-color: rgb(66, 70, 74); }
.context-menu.dropdown-menu .divider, .dropdown-menu .divider { background-color: rgb(119, 119, 119); }
footer { color: inherit; }
@media (max-width: 1000px) {
  footer { border-top: none; }
  footer:hover { color: inherit; }
}
#file-info-file-path .file-info-field-value:hover { background-color: rgb(85, 85, 85); color: rgb(222, 222, 222); }
.megamenu-content, .megamenu-opened header { background: var(--bg-color); }
.megamenu-menu-panel h2, .megamenu-menu-panel h1, .long-btn { color: inherit; }
.megamenu-menu-panel input[type="text"] { background: inherit; border-width: 0px 0px 1px; border-top-style: initial; border-right-style: initial; border-left-style: initial; border-color: initial; border-image: initial; border-bottom-style: solid; }
#recent-file-panel-action-btn { background: inherit; border: 1px solid grey; }
.megamenu-menu-panel .dropdown-menu > li > a { color: inherit; background-color: rgb(47, 53, 58); text-decoration: none; }
.megamenu-menu-panel table td:nth-child(1) { color: inherit; font-weight: bold; }
.megamenu-menu-panel tbody tr:hover td:nth-child(1) { color: white; }
.modal-footer .btn-default, .modal-footer .btn-primary, .modal-footer .btn-default:not(:hover) { border: 1px solid transparent; }
.btn-default:hover, .btn-default:focus, .btn-default.focus, .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default { color: white; border: 1px solid rgb(221, 221, 221); background-color: inherit; }
.modal-header { border-bottom: 0px; }
.modal-footer { border-top: 0px; }
#recent-file-panel tbody tr:nth-child(2n-1) { background-color: transparent !important; }
.megamenu-menu-panel tbody tr:hover td:nth-child(2) { color: inherit; }
.megamenu-menu-panel .btn { border: 1px solid rgb(238, 238, 238); background: transparent; }
.mouse-hover .toolbar-icon.btn:hover, #w-full.mouse-hover, #w-pin.mouse-hover { background-color: inherit; }
.typora-node::-webkit-scrollbar { width: 5px; }
.typora-node::-webkit-scrollbar-thumb:vertical { background: rgba(250, 250, 250, 0.3); }
.typora-node::-webkit-scrollbar-thumb:vertical:active { background: rgba(250, 250, 250, 0.5); }
#w-unpin { background-color: rgb(65, 130, 196); }
#top-titlebar, #top-titlebar * { color: var(--item-hover-text-color); }
.typora-sourceview-on #toggle-sourceview-btn, #footer-word-count:hover, .ty-show-word-count #footer-word-count { background: rgb(51, 51, 51); }
#toggle-sourceview-btn:hover { color: rgb(238, 238, 238); background: rgb(51, 51, 51); }
.on-focus-mode .md-end-block:not(.md-focus):not(.md-focus-container) * { color: rgb(104, 104, 104) !important; }
.on-focus-mode .md-end-block:not(.md-focus) img, .on-focus-mode .md-task-list-item:not(.md-focus-container) > input { }
.on-focus-mode li[cid]:not(.md-focus-container) { color: rgb(104, 104, 104); }
.on-focus-mode .md-fences.md-focus .CodeMirror-code > :not(.CodeMirror-activeline) *, .on-focus-mode .CodeMirror.cm-s-inner:not(.CodeMirror-focused) * { color: rgb(104, 104, 104) !important; }
.on-focus-mode .md-focus, .on-focus-mode .md-focus-container { color: rgb(255, 255, 255); }
.on-focus-mode #typora-source .CodeMirror-code > :not(.CodeMirror-activeline) * { color: rgb(104, 104, 104) !important; }
#write .md-focus .md-diagram-panel { border: 1px solid rgb(221, 221, 221); margin-left: -1px; width: calc(100% + 2px); }
#write .md-focus.md-fences-with-lineno .md-diagram-panel { margin-left: auto; }
.md-diagram-panel-error { color: rgb(241, 144, 142); }
.active-tab-files #info-panel-tab-file, .active-tab-files #info-panel-tab-file:hover, .active-tab-outline #info-panel-tab-outline, .active-tab-outline #info-panel-tab-outline:hover { color: rgb(238, 238, 238); }
.sidebar-footer-item:hover, .footer-item:hover { background: inherit; color: white; }
.ty-side-sort-btn.active, .ty-side-sort-btn:hover, .selected-folder-menu-item a::after { color: white; }
#sidebar-files-menu { border: 1px solid; box-shadow: rgba(0, 0, 0, 0.79) 4px 4px 20px; background-color: var(--bg-color); }
.file-list-item { border-bottom: none; }
.file-list-item-summary { opacity: 1; }
.file-list-item.active:first-child { border-top: none; }
.file-node-background { height: 32px; }
.file-library-node.active > .file-node-content, .file-list-item.active { color: var(--active-file-text-color); }
.file-library-node.active > .file-node-background { background-color: var(--active-file-bg-color); }
.file-list-item.active { background-color: var(--active-file-bg-color); }
#ty-tooltip { background-color: black; color: rgb(238, 238, 238); }
.md-task-list-item > input { margin-left: -1.3em; margin-top: 0.3rem; -webkit-appearance: none; }
.md-mathjax-midline { background-color: rgb(87, 97, 107); border-bottom: none; }
footer.ty-footer { border-color: rgb(101, 101, 101); }
.ty-preferences .btn-default { background: transparent; }
.ty-preferences .btn-default:hover { background: rgb(87, 97, 107); }
.ty-preferences select { border: 1px solid rgb(152, 150, 152); height: 21px; }
.ty-preferences .nav-group-item.active { background: var(--item-hover-bg-color); }
.ty-preferences input[type="search"] { border-color: rgb(51, 51, 51); background: rgb(51, 51, 51); line-height: 22px; border-radius: 6px; color: white; }
.ty-preferences input[type="search"]:focus { box-shadow: none; }
[data-is-directory="true"] .file-node-content { margin-bottom: 0px; }
.file-node-title { line-height: 22px; }
.html-for-mac .file-node-open-state, .html-for-mac .file-node-icon { line-height: 26px; }
::-webkit-scrollbar-thumb { background: rgba(230, 230, 230, 0.3); }
::-webkit-scrollbar-thumb:active { background: rgba(230, 230, 230, 0.5); }
#typora-sidebar:hover div.sidebar-content-content::-webkit-scrollbar-thumb:horizontal { background: rgba(230, 230, 230, 0.3); }
.nav-group-item:active { background-color: rgb(71, 77, 84); }
.md-search-hit { background-color: rgba(199, 140, 60, 0.81); color: rgb(238, 238, 238); }
.md-search-hit * { color: rgb(238, 238, 238); }
#md-searchpanel input { color: white; }

 .typora-export li, .typora-export p, .typora-export,  .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><h1><a name="好客租房-flutter-项目" class="md-header-anchor"></a><span>好客租房 flutter 项目</span></h1><h2><a name="1-课程简介" class="md-header-anchor"></a><span>1 课程简介</span></h2><h3><a name="11-为什么学习-flutter-项目" class="md-header-anchor"></a><span>1.1 为什么学习 flutter 项目</span></h3><ol start='' ><li><p><span>市场需要 flutter—— android 和 ios 使用一套设计图，却需要两批人来开发。目前 flutter 开始支持 web 和 桌面开发。</span></p></li><li><p><span>Flutter 使用更好的语言——Dart语言。 Javascript 方便调试，有时性能不能满足需求，语言特性更新依赖浏览器厂商的支持；java 和 oc 性能好，但是调试不如 Javascript 方便。Dart 语言同时支持 JIT（just in time）和 AOT（ahead of time）两种模式。开发时使用Dart的JIT运行模式，可以做到，修改的效果及时展现到页面上；产品发布后，使用Dart的AOT运行模式，保证APP的性能最优。从而极大的</span><strong><span>提高 APP 的开发效率</span></strong><span>。</span></p></li><li><p><span>Flutter 开箱即用—— flutter 提供丰富的组件，能够快速的开发出 </span><strong><span>原生 app</span></strong><span>。</span></p></li><li><p><span>以项目的方式学习—— 学到更实用的知识。</span></p><p>&nbsp;</p></li></ol><h3><a name="12-课程内容" class="md-header-anchor"></a><span>1.2 课程内容</span></h3><p><strong><span>项目知识点：</span></strong></p><ul><li><p><span>使用第三方组件</span></p></li><li><p><strong><span>通用组件封装</span></strong></p></li><li><p><span>使用静态资源</span><span>	</span></p><ul><li><span>本地图片</span></li><li><span>网络图片</span></li><li><span>使用自带 icon</span></li><li><span>使用字体 icon</span></li><li><span>网络图片缓存超时处理</span></li></ul></li><li><p><span>本地存储及 store 封装</span></p></li><li><p><span>数据管理 scoped_model</span><span>							</span></p></li><li><p><span>网络请求 及 dio_http 封装</span></p></li><li><p><span>序列号及反序列化半自动生成实体类</span></p></li><li><p><span>图片上传</span></p></li><li><p><span>app icon 及 启动页</span></p><p>&nbsp;</p></li></ul><p><strong><span>面向群体：</span></strong></p><ul><li><span>有一定编程基础—— 会一门其他编程语言</span></li><li><span>有一定 flutter 基础—— 学完 </span><a href='https://xuexi.boxuegu.com/video.html?courseId=1132&amp;moduleId=102351&amp;type=PATH&amp;phaseId=737'><span>Flutter 框架入门</span></a><span>,或者通过</span><a href='https://flutter.dev/'><span>官网</span></a><span>可以安装 flutter 并运行demo。</span></li><li><span>希望通过项目来强化 flutter 相关技术</span></li></ul><p>&nbsp;</p><p><strong><span>目标：</span></strong></p><p><span>能够独立完成常规的 flutter 项目</span></p><p>&nbsp;</p><h3><a name="13-项目简介" class="md-header-anchor"></a><span>1.3 项目简介</span></h3><p><strong><span>项目路径</span></strong></p><ul><li><p><span>基础回顾</span></p></li><li><p><span>项目框架</span></p></li><li><p><span>静态页面</span></p></li><li><p><span>前后端联调</span></p></li><li><p><span>构建打包</span></p><p>&nbsp;</p></li></ul><p><strong><span>包含的页面</span></strong></p><ul><li><p><span>登陆页</span></p></li><li><p><span>注册页</span></p></li><li><p><span>首页</span></p><ul><li><span>首页tab</span></li><li><span>搜索tab</span></li><li><span>咨询tab</span></li><li><span>我的tab</span></li></ul></li><li><p><span>搜索页</span></p></li><li><p><span>房屋管理</span></p></li><li><p><span>添加房屋</span></p></li><li><p><span>房屋详情</span></p></li><li><p><span>设置</span></p></li></ul><p>&nbsp;</p><h2><a name="2-基础回顾" class="md-header-anchor"></a><span>2 基础回顾</span></h2><ol start='' ><li><p><span>无状态组件 vs 有状态组件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//无状态组件</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">MyText</span> <span class="cm-keyword">extends</span> <span class="cm-variable">StatelessWidget</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// 组件的参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">text</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// 组件的构造函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">MyText</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">text</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">//组件的实现部分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Widget</span> <span class="cm-variable">build</span>(<span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">Text</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">text</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">textStyle</span>: <span class="cm-keyword">new</span> <span class="cm-variable">TextStyle</span>(<span class="cm-variable">fontSize</span>: <span class="cm-number">40.0</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">///////////////////////////////////////////////////////////////////////</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//有状态组件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">Counter</span> <span class="cm-keyword">extends</span> <span class="cm-variable">StatefulWidget</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">// 组件的参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Counter</span>({<span class="cm-variable">Key</span> <span class="cm-variable">key</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">title</span>}) : <span class="cm-keyword">super</span>(<span class="cm-variable">key</span>: <span class="cm-variable">key</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-comment">// 没有 build 方法，但有 createState() 方法。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">_MyHomePageState</span> <span class="cm-variable">createState</span>() <span class="cm-operator">=&gt;</span> <span class="cm-keyword">new</span> <span class="cm-variable">_MyHomePageState</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">_MyHomePageState</span> <span class="cm-keyword">extends</span> <span class="cm-variable">State</span><span class="cm-operator">&lt;</span><span class="cm-variable">MyHomePage</span><span class="cm-operator">&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">//状态</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">int</span> <span class="cm-variable">counter</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">void</span> <span class="cm-variable">increaseCount</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">setState</span>(() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">this</span>.<span class="cm-variable">counter</span><span class="cm-operator">++</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-tab" role="presentation" cm-text="	">   </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//build 方法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Widget</span> <span class="cm-variable">build</span>(<span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">RaisedButton</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">onPressed</span>: <span class="cm-variable">increaseCount</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">child</span>: <span class="cm-keyword">new</span> <span class="cm-variable">Text</span>(<span class="cm-string">'点击+1'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1196px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1196px;"></div></div></div></pre></li><li><p><span>Material 组件 和 Cupertino 组件</span></p><blockquote><p><span>flutter 是开箱即用的</span></p></blockquote><p><span>Material 组件 就是 android 风格的组件</span></p><p><span>Cupertino 组件 就是 ios 风格的组件</span></p></li><li><p><span>常用组件</span></p><p><span>Text - 用于显示文字的组件</span>
<span>Image -用于显示图片的组件</span>
<span>Icon - 用于显示图标，有内置的 Material 和 Cupertino 风格的图标</span>
<span>Container - 类似 html 中的 div。可以很方便的添加 内外边距，对齐，背景，边角的特性。</span>
<span>Row, Column - 用于水平和垂直方向的多组件展示。使用 flex 布局。</span>
<span>Stack - 用于z轴方向的多组件展示。可以把一个组件堆叠到另外一个组件上面。类似 css 中的 Position。</span>
<span>Scaffold - 页面的基本组件, 提供了基本的页面结构。包括 顶部 title 及功能按钮，顶部tab，底部tab，导航按钮等。</span></p></li></ol><p>&nbsp;</p><h2><a name="3-项目框架" class="md-header-anchor"></a><span>3 项目框架</span></h2><h3><a name="31-初始化项目" class="md-header-anchor"></a><span>3.1 初始化项目</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7rqj7ji3mj30qu1aok3j.jpg" alt="image-20191009102305715 " style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7rql6re3sj30ru1f4ajm.jpg" alt="image-20191009102504777" style="zoom:33%;"></div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>打开vscode </span></p></li><li><p><span>初始化项目【菜单】— 【查看】—【命令面板】— 【Flutter：New Project】</span></p></li><li><p><span>demo 文件夹分析</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7s1j7enq0j307e08maa2.jpg" referrerpolicy="no-referrer" alt="image-20191009104401630"></p></li><li><p><span>打开模拟器【菜单】— 【查看】—【命令面板】— 【Flutter：Launch Emulator】</span></p></li><li><p><span>在 ios 模拟器上运行 demo【菜单】— 【调试】—【启动调试】</span></p></li><li><p><span>在 android 模拟器上运行 demo</span></p></li><li><p><strong><span>demo 代码分析</span></strong></p><ol start='' ><li><span>引入 flutter 依赖</span></li><li><span>程序入口</span></li><li><span>无状态组件</span></li><li><span>有状态组件</span></li></ol></li></ol><p><strong><span>注意：</span></strong></p><ol start='' ><li><span>如果没有命令Flutter：New Project，则说明 flutter 安装有问题</span></li><li><span>如果没有命令 Flutter：Launch Emulator，则说明模拟器安装有问题</span></li></ol><h3><a name="32-编写一个简单页面-准备" class="md-header-anchor"></a><span>3.2 编写一个简单页面-准备</span></h3><p><strong><span>知识点：</span></strong></p><p><span>MaterialApp:  封装了应用程序实现 Material Design 所需要的一些 widget。</span></p><p><span>Scaffold：Material Design 布局结构的基本实现。</span></p><p><span>Appbar：一个Material Design应用程序栏，由工具栏和其他可能的widget组成。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">MaterialApp</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">home</span>: <span class="cm-variable">Scaffold</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">appBar</span>: <span class="cm-variable">AppBar</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-keyword">const</span> <span class="cm-variable">Text</span>(<span class="cm-string">'Home'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p><a href='https://flutterchina.club/widgets/material/'><span>组件细节</span></a></p><p><strong><span>功能拆分：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7u17p75lmj30zm0pyafu.jpg" referrerpolicy="no-referrer" alt="image-20191011100347079"></p><h3><a name="33-编写一个简单页面-实现" class="md-header-anchor"></a><span>3.3 编写一个简单页面-实现</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7rz6g19lqj30dx0pkq5e.jpg" alt="image-20191009152217329" style="zoom: 50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>添加 PageContent 组件</span></p><ol start='' ><li><span>新建文件 /widgets/page_content.dart</span></li><li><span>添加 material 依赖</span></li><li><span>编写无状态组件</span></li><li><span>添加 name 参数</span></li><li><strong><span>使用 Scaffold</span></strong></li></ol></li><li><p><span>添加 home 页面</span></p><ol start='' ><li><span>新建文件 /pages/home/index.dart</span></li><li><span>添加 material, page_content依赖</span></li><li><span>编写无状态组件</span></li><li><span>使用 PageContent</span></li></ol></li><li><p><span>添加 Application 应用根组件</span></p><ol start='' ><li><span>新建文件 /application.dart</span></li><li><span>添加依赖</span></li><li><strong><span>使用 MaterialApp</span></strong></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="34-安装-fluro-并添加登陆页面" class="md-header-anchor"></a><span>3.4 安装 fluro 并添加登陆页面</span></h3><p><span>效果：</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7s21xvmubj30dx0pkaci.jpg" alt="image-20191009170147237" style="zoom:50%;" /></p><p><span>步骤：</span></p><ol start='' ><li><p><span>了解 </span><a href='https://github.com/theyakka/fluro'><span>fluro</span></a></p><ol start='' ><li><span>简单</span></li><li><span>支持参数通配符 /room/:id</span></li><li><span>简化自定义动画</span></li></ol></li><li><p><span>添加依赖</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="yaml"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> dependencies</span><span class="cm-meta">:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; fluro</span><span class="cm-meta">: </span><span class="cm-string">"^1.5.1"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>添加 /pages/login.dart</span></p></li><li><p><span>参考 /pages/home/index.dart 完善登陆页。</span></p></li></ol><h3><a name="35-如何配置fluro" class="md-header-anchor"></a><span>3.5 如何配置fluro</span></h3><p><strong><span>问题：</span></strong></p><p><span>如何配置fluro？</span></p><p><strong><span>分析：</span></strong></p><ul><li><p><span>看</span><a href='https://github.com/theyakka/fluro'><span>官方文档</span></a></p><ul><li><span>声明 路由</span></li><li><span>配置 路由</span></li><li><span>关联 路由 和 materialApp</span></li><li><span>使用 路由</span></li></ul></li><li><p><span>分析示例代码</span></p><ul><li><span>编写</span><strong><span>路由</span></strong><span>配置文件</span></li><li><span>在 Application 中配置</span><strong><span>路由</span></strong><span>—声明/配置/关联 路由</span></li><li><span>测试</span><strong><span>路由</span></strong></li></ul></li></ul><p><strong><span>结论</span></strong><span>：</span></p><ol start='' ><li><p><span>编写</span><strong><span>路由</span></strong><span>配置文件</span></p><ol start='' ><li><span>创建 routes.dart 文件 并编写Routes类的基本结构</span></li><li><span>定义路由名称</span></li><li><span>定义路由处理函数</span></li><li><span>编写函数 configureRoutes 关联路由名称和处理函数</span></li></ol></li><li><p><span>在 Application 中配置</span><strong><span>路由</span></strong></p><ol start='' ><li><span>定义 router </span></li><li><span>通过调用configureRoutes 配置 router</span></li><li><span>在 MaterialApp 中使用 router</span></li></ol></li><li><p><span>测试</span><strong><span>路由</span></strong></p><ol start='' ><li><span>在 PageContent  中添加跳转按钮</span></li></ol></li></ol><h3><a name="36-配置fluro" class="md-header-anchor"></a><span>3.6 配置fluro</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7sr0iwnf6j30dx0pk40z.jpg" alt="image-20191010072522174" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>编写</span><strong><span>路由</span></strong><span>配置文件</span></p><ol start='' ><li><span>创建 routes.dart 文件 并编写Routes类的基本结构</span></li><li><span>定义路由名称</span></li><li><span>定义路由处理函数</span></li><li><span>编写函数 configureRoutes 关联路由名称和处理函数</span></li></ol></li><li><p><span>在 Application 中配置</span><strong><span>路由</span></strong></p><ol start='' ><li><span>定义 router </span></li><li><span>通过调用configureRoutes 配置 router</span></li><li><span>在 MaterialApp 中使用 router</span></li></ol></li><li><p><span>测试</span><strong><span>路由</span></strong></p><ol start='' ><li><span>在 PageContent  中添加跳转按钮</span></li></ol></li></ol><p>&nbsp;</p><p><span>参考官网代码：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//定义路由处理函数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">usersHandler</span> <span class="cm-operator">=</span> <span class="cm-variable">Handler</span>(<span class="cm-variable">handlerFunc</span>: (<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>, <span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">UsersScreen</span>(<span class="cm-variable">params</span>[<span class="cm-string">"id"</span>][<span class="cm-number">0</span>]);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//关联路由和处理函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">void</span> <span class="cm-variable">defineRoutes</span>(<span class="cm-variable">Router</span> <span class="cm-variable">router</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">router</span>.<span class="cm-variable">define</span>(<span class="cm-string">"/users/:id"</span>, <span class="cm-variable">handler</span>: <span class="cm-variable">usersHandler</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><h3><a name="37-优化路由配置" class="md-header-anchor"></a><span>3.7 优化路由配置</span></h3><p><strong><span>问题</span></strong><span>：</span></p><p><span>错误页面如何处理？带参数的页面如何处理？</span></p><p><strong><span>效果</span></strong><span>：</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ssfaklr3j30l80c9mzg.jpg" referrerpolicy="no-referrer" alt="image-20191010081409711"></p><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>错误页面处理</span></p><ol start='' ><li><span>在 /pages 目录添加 not_found.dart 文件</span></li><li><span>实现 NotFoundPage</span></li><li><span>在 /routes.dart 添加 _notFoundHandler</span></li><li><span>在 /routes.dart 的 configureRoutes 中添加 router.notFoundHandler=_notFoundHandler;</span></li><li><span>修改 PageContent 测试</span></li></ol></li><li><p><span>带参数页面处理</span></p><ol start='' ><li><span>在 /pages 目录添加 room_detail/index.dart 文件</span></li><li><span>实现 RoomDetailPage</span></li><li><span>在 /routes.dart 添加 _notFoundHandler</span></li><li><span>在 /routes.dart 的 configureRoutes 中添加 RoomDetailPage;</span></li><li><span>修改 PageContent 测试</span></li></ol></li></ol><p><strong><span>补充</span></strong><span>：</span></p><p><span>实现页面步骤</span></p><ol start='' ><li><span>添加依赖</span></li><li><span>编写组件模板 有状态组件/无状态组件</span></li><li><span>如果有参数添加组件参数</span></li><li><span>完善 build 方法</span></li></ol><h2><a name="4-静态页面" class="md-header-anchor"></a><span>4 静态页面</span></h2><h3><a name="41-登陆页-页面分析" class="md-header-anchor"></a><span>4.1 登陆页-页面分析</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7u8t9pyggj30cm0myq3f.jpg" referrerpolicy="no-referrer" alt="006y8mN6ly1g7u4j137ksj30cm0myaah"></p><p><strong><span>页面拆分：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7u52u1l34j30u20u0wqj.jpg" referrerpolicy="no-referrer" alt="image-20191011121734395"></p><p>&nbsp;</p><ul><li><p><span>scafford</span></p><ul><li><p><span>appBar</span><span>	</span></p><ul><li><span>title— Text</span></li></ul></li><li><p><span>body</span></p><ul><li><span>用户名— TextField</span></li><li><span>密码— TextField</span></li><li><span>登陆按钮— RaisedButton</span></li><li><span>注册链接— Row[Text,FlatButton]</span></li></ul></li></ul></li></ul><p>&nbsp;</p><h3><a name="42-登陆页-主体结构" class="md-header-anchor"></a><span>4.2 登陆页-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7u8ufrl2gj30cm0my76l.jpg" referrerpolicy="no-referrer" alt="image-20191011142754560"></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>添加 Scaffold</span></p></li><li><p><span>完成 appBar 部分</span></p></li><li><p><span>完成 body 部分</span></p><ol start='' ><li><span>用户名</span></li><li><span>密码</span></li><li><span>登陆按钮</span></li><li><span>注册链接</span></li></ol></li><li><p><span>主体颜色 — theme</span></p></li><li><p><span>测试</span></p></li></ol><h3><a name="43-登陆页-密码显示隐藏" class="md-header-anchor"></a><span>4.3 登陆页-密码显示隐藏</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7u97z4cyoj30cm0mydib.jpg" alt="image-20191011144055228" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>将无状态组件改成有状态组件— 右键 重构</span></li><li><span>添加可点击的图标— IconButton</span></li><li><span>添加状态— showPassword</span></li><li><span>根据状态展示不同内容</span></li><li><span>给图标添加点击事件</span></li><li><span>测试</span></li></ol><p>&nbsp;</p><h3><a name="44-登陆页-细节优化" class="md-header-anchor"></a><span>4.4 登陆页-细节优化</span></h3><p><span>效果：</span></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7u8uurjgbj30cm0myaah.jpg" alt="006y8mN6ly1g7u4j137ksj30cm0myaah" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7u97z4cyoj30cm0mydib.jpg" alt="image-20191011144055228" style="zoom:50%;">
</div><p><span>问题及解决方案：</span></p><ol start='' ><li><p><span>【去注册】颜色问题</span></p><p><span>添加style</span></p></li><li><p><span>上下间距问题？</span></p><p><span>添加 Padding</span></p></li><li><p><span>边距/异形屏幕问题？</span></p><p><span>使用 SafeArea</span></p></li><li><p><span>垂直高度不足问题？</span></p><p><span>使用 ListView 替代 Column</span></p></li><li><p><span>登陆按钮宽度和颜色问题？</span></p><p><span>宽度：SizedBox 或者父级固定宽度</span></p><p><span>颜色：手动设置</span></p></li><li><p><span>使用 ListView 替代 Column</span></p><p><span> </span></p></li></ol><h3><a name="45-注册页-添加" class="md-header-anchor"></a><span>4.5 注册页-添加</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ulcpq74jj30p819wgte.jpg" alt="image-20191011214036934" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>添加文件 /pages/register.dart</span></p></li><li><p><span>将login.dart 文件拷贝到 register.dart</span></p></li><li><p><span>修改类名称</span></p></li><li><p><span>修改 title</span></p></li><li><p><span>在路由中添加 register</span></p><ol start='' ><li><span>添加 route name</span></li><li><span>添加 route handler</span></li><li><span>在 configureRoutes 中关联 name 和router</span></li></ol></li><li><p><span>修改了组件类型，需要重启app后测试</span></p></li></ol><h3><a name="46-注册页-完善" class="md-header-anchor"></a><span>4.6 注册页-完善</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ulijpmjrj30p819wjz5.jpg" alt="image-20191011214615552" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>删除密码显示逻辑</span></li><li><span>添加确认密码</span></li><li><span>修改按钮及下方链接到文案</span></li><li><span>优化登陆注册跳转，使用 Navigator.pushReplacementNamed</span></li></ol><h3><a name="47-首页-tab-分析" class="md-header-anchor"></a><span>4.7 首页-tab-分析</span></h3><p><span>设计图分析：</span></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ullg1hwmj30p819w1c4.jpg" alt="image-20191011214902143" style="zoom:20%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ullvo01tj30p819waui.jpg" alt="image-20191011214928030" style="zoom:20%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ulm2aciij30p819wwzh.jpg" alt="image-20191011214939606" style="zoom:20%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ulme27ufj30p819wtpq.jpg" alt="image-20191011214952908" style="zoom:20%;">
</div><p>&nbsp;</p><p><span>结论：</span></p><ol start='' ><li><p><span>首页共用 tab 按钮区域 </span></p></li><li><p><span>tab 内容区的 appBar 不一样</span></p></li><li><p><span>4 个 tab 内容区不一样</span></p></li><li><p><span>可以使用 flutter 自带组件 </span><a href='https://api.flutter.dev/flutter/material/BottomNavigationBar-class.html'><span>BottomNavigationBar</span></a><span> 实现</span></p><ol start='' ><li><p><span>需要准备 4 个 tab 内容区（tabView）</span></p></li><li><p><span>需要准备 4 个 BottomNavigationBarItem</span></p><p><span> </span></p></li></ol></li></ol><h3><a name="48-首页-tab-编码" class="md-header-anchor"></a><span>4.8 首页-tab-编码</span></h3><p><span>效果：</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qohfmr6wj30p819w111.jpg" alt="image-20191011230510193" style="zoom:50%;" /></p><p><span>步骤：</span></p><ol start='' ><li><span>将 HomePage 改成有状态组件</span></li><li><span>使用准备好的数据</span></li><li><span>使用</span><a href='https://github.com/blankapp/flutter-widget-livebook/blob/master/uiexplorer/lib/views/slice_bottom_navigation_bar/slice_bottom_navigation_bar.dart'><span>官网 demo 代码</span></a></li><li><span>删除 appBar</span></li><li><span>修改 Scaffold.body</span></li><li><span>修改 Scaffold.bottomNavigationBar</span></li></ol><p>&nbsp;</p><p><span>参考：官网 tab 代码</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'../../includes.dart'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">SliceBottomNavigationBar</span> <span class="cm-keyword">extends</span> <span class="cm-variable">StatefulWidget</span> <span class="cm-keyword">implements</span> <span class="cm-variable">SliceExample</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-keyword">get</span> <span class="cm-variable">name</span> <span class="cm-operator">=&gt;</span> <span class="cm-string">'SliceBottomNavigationBar'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">static</span> <span class="cm-keyword">const</span> <span class="cm-variable">TextStyle</span> <span class="cm-variable">optionStyle</span> <span class="cm-operator">=</span> <span class="cm-variable">TextStyle</span>(<span class="cm-variable">fontSize</span>: <span class="cm-number">30</span>, <span class="cm-variable">fontWeight</span>: <span class="cm-variable">FontWeight</span>.<span class="cm-variable">bold</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">static</span> <span class="cm-keyword">const</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Widget</span><span class="cm-operator">&gt;</span> <span class="cm-variable">_widgetOptions</span> <span class="cm-operator">=</span> <span class="cm-operator">&lt;</span><span class="cm-variable">Widget</span><span class="cm-operator">&gt;</span>[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Text</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'Index 0: Home'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">style</span>: <span class="cm-variable">optionStyle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Text</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'Index 1: Business'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">style</span>: <span class="cm-variable">optionStyle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Text</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'Index 2: School'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">style</span>: <span class="cm-variable">optionStyle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">_SliceBottomNavigationBarState</span> <span class="cm-variable">createState</span>() <span class="cm-operator">=&gt;</span> <span class="cm-variable">_SliceBottomNavigationBarState</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">_SliceBottomNavigationBarState</span> <span class="cm-keyword">extends</span> <span class="cm-variable">State</span><span class="cm-operator">&lt;</span><span class="cm-variable">SliceBottomNavigationBar</span><span class="cm-operator">&gt;</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-variable">_selectedIndex</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">void</span> <span class="cm-variable">_onItemTapped</span>(<span class="cm-builtin">int</span> <span class="cm-variable">index</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">setState</span>(() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">_selectedIndex</span> <span class="cm-operator">=</span> <span class="cm-variable">index</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Widget</span> <span class="cm-variable">build</span>(<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Scaffold</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">appBar</span>: <span class="cm-variable">AppBar</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-keyword">const</span> <span class="cm-variable">Text</span>(<span class="cm-string">'BottomNavigationBar Sample'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">body</span>: <span class="cm-variable">Center</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">child</span>: <span class="cm-variable">SliceBottomNavigationBar</span>.<span class="cm-variable">_widgetOptions</span>.<span class="cm-variable">elementAt</span>(<span class="cm-variable">_selectedIndex</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">bottomNavigationBar</span>: <span class="cm-variable">BottomNavigationBar</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">items</span>: <span class="cm-keyword">const</span> <span class="cm-operator">&lt;</span><span class="cm-variable">BottomNavigationBarItem</span><span class="cm-operator">&gt;</span>[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">BottomNavigationBarItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">icon</span>: <span class="cm-variable">Icon</span>(<span class="cm-variable">Icons</span>.<span class="cm-variable">home</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-variable">Text</span>(<span class="cm-string">'Home'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">BottomNavigationBarItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">icon</span>: <span class="cm-variable">Icon</span>(<span class="cm-variable">Icons</span>.<span class="cm-variable">business</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-variable">Text</span>(<span class="cm-string">'Business'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">BottomNavigationBarItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">icon</span>: <span class="cm-variable">Icon</span>(<span class="cm-variable">Icons</span>.<span class="cm-variable">school</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-variable">Text</span>(<span class="cm-string">'School'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">currentIndex</span>: <span class="cm-variable">_selectedIndex</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">selectedItemColor</span>: <span class="cm-variable">Colors</span>.<span class="cm-variable">amber</span>[<span class="cm-number">800</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onTap</span>: <span class="cm-variable">_onItemTapped</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1742px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1742px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="49-首页-tabindex-分析" class="md-header-anchor"></a><span>4.9 首页-tabIndex-分析</span></h3><p><span>设计图分析：</span></p><p>&nbsp;</p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7uomnsrgij30tu0yk7n1.jpg" alt="image-20191011233357243" style="zoom:50%;" /></p><p>&nbsp;</p><p><strong><span>结论：</span></strong></p><p><span>首页第一个tab（tabIndex）共5个区域，对应5个不同的模块。</span></p><ol start='' ><li><span>顶部区域—— searchBar</span></li><li><span>轮播图区域—— IndexSwipper</span></li><li><span>导航区域—— IndexNavigator</span></li><li><span>房屋推荐区域—— IndexRecommend</span></li><li><span>资讯区域—— Info</span></li></ol><h3><a name="410--首页-tabindex-页面结构" class="md-header-anchor"></a><span>4.10  首页-tabIndex-页面结构</span></h3><p><strong><span>效果：</span></strong></p><p><span>  </span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7val30qscj30p819wn4s.jpg" alt="image-20191012121340467" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>新建文件 /pages/home/tab_index/index.dart</span></li><li><span>添加依赖，编写无状态组件</span></li><li><span>简化实现顶部区域--appBar</span></li><li><span>body 部分包含多个组件且可以滚动—使用 ListView</span></li><li><span>在 HomePage 中使用 TabIndex</span></li></ol><h3><a name="411--首页-tabindex-轮播图-准备" class="md-header-anchor"></a><span>4.11  首页-tabIndex-轮播图-准备</span></h3><p><strong><span>问题：</span></strong></p><p><span>是否有第三方组件满足轮播图的需求？</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ullg1hwmj30p819w1c4.jpg" alt="image-20191011214902143" style="zoom:20%;" /></p><p>&nbsp;</p><p><strong><span>分析：</span></strong></p><p><span>有 </span><a href='https://github.com/best-flutter/flutter_swiper'><span>flutter_swiper</span></a><span>!</span></p><p><strong><span>用法：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1. 安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// flutter_swiper : ^1.1.6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2. 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">import</span> <span class="cm-string">'package:flutter_swiper/flutter_swiper.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3. 配置Swiper</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Swiper</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">itemBuilder</span>: (<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>,<span class="cm-builtin">int</span> <span class="cm-variable">index</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">Image</span>.<span class="cm-variable">network</span>(<span class="cm-string">"http://via.placeholder.com/350x150"</span>,<span class="cm-variable">fit</span>: <span class="cm-variable">BoxFit</span>.<span class="cm-variable">fill</span>,);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">itemCount</span>: <span class="cm-number">3</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">pagination</span>: <span class="cm-keyword">new</span> <span class="cm-variable">SwiperPagination</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">control</span>: <span class="cm-keyword">new</span> <span class="cm-variable">SwiperControl</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  )</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>图片资源：</span></strong></p><p><span>  &#39;</span><a href='http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tdgve1j30ku0bsn75.jpg' target='_blank' class='url'>http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tdgve1j30ku0bsn75.jpg</a><span>&#39;,</span></p><p><span>  &#39;</span><a href='http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2whp87sj30ku0bstec.jpg' target='_blank' class='url'>http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2whp87sj30ku0bstec.jpg</a><span>&#39;,</span></p><p><span>  &#39;</span><a href='http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tl1v3bj30ku0bs77z.jpg' target='_blank' class='url'>http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tl1v3bj30ku0bs77z.jpg</a><span>&#39;,</span></p><p><span>图片宽750px，高424px；</span></p><p><strong><span>注意：flutter 如何使用网络图片</span></strong></p><h3><a name="412--首页-tabindex-轮播图-实现" class="md-header-anchor"></a><span>4.12  首页-tabIndex-轮播图-实现</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7vgvko2fuj30p819wton.jpg" alt="image-20191012155119426" style="zoom:50%;" /></p><p>&nbsp;</p><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备组件框架代码</span></p><ol start='' ><li><span>新建文件 /widgets/common_swipper.dart</span></li><li><span>添加依赖 material 和 flutter_swiper</span></li><li><span>准备图片数据</span></li><li><span>编写无状态组件</span></li><li><span>添加 images 参数 并在构造函数中赋值</span></li></ol></li><li><p><span>编写 swiper 核心代码</span></p><ol start='' ><li><span>参照官网使用 swipper</span></li><li><span>修改 itemBuilder 和 itemCount</span></li><li><strong><span>Swiper 父组件指定高度</span></strong></li><li><span>删除 Swiper.control</span></li></ol></li><li><p><span>测试</span></p><ol start='' ><li><span>在 tabIndex 中使用 CommonSwiper</span></li></ol></li></ol><h3><a name="413-首页-tabindex-导航-准备" class="md-header-anchor"></a><span>4.13 首页-tabIndex-导航-准备</span></h3><p><strong><span>结构分析：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ullg1hwmj30p819w1c4.jpg" alt="image-20191011214902143" style="zoom: 25%;" /></p><ul><li><p><span>indexNavigator--Row</span></p><ul><li><p><span>item--Column</span></p><ul><li><span>Image—Image.asset</span></li><li><span>整组— Text</span></li></ul></li><li><p><span>item--Column</span></p><ul><li><span>Image—Image.asset</span></li><li><span>合租— Text</span></li></ul></li><li><p><span>item--Column</span></p><ul><li><span>Image</span></li><li><span>地图找房— Text</span></li></ul></li><li><p><span>item--Column</span></p><ul><li><span>Image</span></li><li><span>去出租— Text</span></li></ul></li></ul></li></ul><p>&nbsp;</p><p><strong><span>资源准备：</span></strong></p><ol start='' ><li><p><span>本地图片准备</span></p><ol start='' ><li><p><span>将图片拷贝到 /static/images/ 目录</span></p></li><li><p><span>在 pubspec.yaml 中引入图片</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="ymal"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="ymal"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  assets:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # 首页——第一个tab-导航图标</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  - static/images/home_index_navigator_total.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  - static/images/home_index_navigator_map.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  - static/images/home_index_navigator_share.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  - static/images/home_index_navigator_rent.png</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p>&nbsp;</p></li></ol></li><li><p><span>数据准备</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// /pages/home/tab_index/index_navigator_item.dart</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:flutter/material.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">IndexNavigatorItem</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">imageUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Function</span>(<span class="cm-variable">BuildContext</span> <span class="cm-variable">contenxt</span>) <span class="cm-variable">onTap</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexNavigatorItem</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">imageUri</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">onTap</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">IndexNavigatorItem</span><span class="cm-operator">&gt;</span> <span class="cm-variable">indexNavigatorItemList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexNavigatorItem</span>(<span class="cm-string">'整组'</span>, <span class="cm-string">'static/images/home_index_navigator_total.png'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  (<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Navigator</span>.<span class="cm-keyword">of</span>(<span class="cm-variable">context</span>).<span class="cm-variable">pushReplacementNamed</span>(<span class="cm-string">'login'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexNavigatorItem</span>(<span class="cm-string">'合租'</span>, <span class="cm-string">'static/images/home_index_navigator_share.png'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  (<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Navigator</span>.<span class="cm-keyword">of</span>(<span class="cm-variable">context</span>).<span class="cm-variable">pushReplacementNamed</span>(<span class="cm-string">'login'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexNavigatorItem</span>(<span class="cm-string">'地图找房'</span>, <span class="cm-string">'static/images/home_index_navigator_map.png'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  (<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Navigator</span>.<span class="cm-keyword">of</span>(<span class="cm-variable">context</span>).<span class="cm-variable">pushReplacementNamed</span>(<span class="cm-string">'login'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexNavigatorItem</span>(<span class="cm-string">'去出租'</span>, <span class="cm-string">'static/images/home_index_navigator_rent.png'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  (<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Navigator</span>.<span class="cm-variable">pushNamed</span>(<span class="cm-variable">context</span>, <span class="cm-string">'login'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 832px;"></div><div class="CodeMirror-gutters" style="display: none; height: 832px;"></div></div></div></pre><p>&nbsp;</p></li></ol><h3><a name="414-首页-tabindex-导航-实现" class="md-header-anchor"></a><span>4.14 首页-tabIndex-导航-实现</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7vkg5ism6j30p819w7i6.jpg" alt="image-20191012175455974" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加文件 /pages/home/tab_index/index_navigator.dart</span></li><li><span>添加依赖 material 和 index_navigator_item</span></li><li><span>编写无状态组件</span></li><li><span>完成页面结构</span></li><li><span>测试</span></li><li><span>调整细节</span></li></ol><h3><a name="415-组件-commonimage-封装-分析" class="md-header-anchor"></a><span>4.15 组件 CommonImage 封装-分析</span></h3><p><strong><span>问题：</span></strong></p><p><span>轮播图的网络图片偶尔出现超时，怎么解决？</span></p><p><span>如果涉及图片方面的优化，我们是不是需要修改很多处？</span></p><p><strong><span>结论：</span></strong></p><p><span>自己封装一个图片组件！</span></p><p><strong><span>细化方案：</span></strong></p><ol start='' ><li><p><span>根据资源地址是可以区分本地资源和网络的资源的(网络图片地址以 http 开头，本地图片地址以 static 开头)，所以可以共用一个图片组件</span></p></li><li><p><span>网络图片添加本地缓存，延长网络请求超时时间！可以使用第三方组件 </span><a href='https://github.com/mchome/flutter_advanced_networkimage'><span>AdvancedNetworkImage</span></a></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 1.安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// flutter_advanced_networkimage: ^0.5.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 2. 导入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:flutter_advanced_networkimage/provider.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 2.用法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Image</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">image</span>: <span class="cm-variable">AdvancedNetworkImage</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">url</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">header</span>: <span class="cm-variable">header</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">useDiskCache</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">cacheRule</span>: <span class="cm-variable">CacheRule</span>(<span class="cm-variable">maxAge</span>: <span class="cm-keyword">const</span> <span class="cm-variable">Duration</span>(<span class="cm-variable">days</span>: <span class="cm-number">7</span>)),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">fit</span>: <span class="cm-variable">BoxFit</span>.<span class="cm-variable">cover</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 416px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>图片组件前期只用支持4个参数。</span></p><ol start='' ><li><span>src — 图片地址 String 必须按参数，可以是网络图片地址或者本地图片地址</span></li><li><span>width — 图片宽度 double 可选参数</span></li><li><span>height — 图片高度 double 可选参数</span></li><li><span>fit— 图片填充方式 BoxFit 可选参数</span></li></ol></li></ol><h3><a name="416-组件-commonimage-封装-实现" class="md-header-anchor"></a><span>4.16 组件 CommonImage 封装-实现</span></h3><p><strong><span>效果：</span></strong></p><p><span>不影响之前图片展示。</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7vkg5ism6j30p819w7i6.jpg" alt="image-20191012175455974" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>安装 flutter_advanced_networkimage: ^0.5.0 依赖</span></li><li><span>添加文件 /widgets/common_image.dart</span></li><li><span>引入依赖</span></li><li><span>编写 正则 根据图片地址判断是网络图片还是本地图片</span></li></ol></li><li><p><span>编写框架代码</span></p><ol start='' ><li><span>编写无状态组件</span></li><li><span>完善组件参数 src width height fit</span></li></ol></li><li><p><span>完成核心逻辑</span></p><ol start='' ><li><span>如果是网络图片，使用 flutter_advanced_networkimage</span></li><li><span>如果是本地图片，使用 Image.asset</span></li><li><span>返回 Container</span></li></ol></li><li><p><span>使用 CommonImage</span></p></li></ol><h3><a name="417-首页-tabindex-推荐-准备" class="md-header-anchor"></a><span>4.17 首页-tabIndex-推荐-准备</span></h3><p><span>分析：</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ullg1hwmj30p819w1c4.jpg" alt="image-20191011214902143" style="zoom: 50%;" /></p><p>&nbsp;</p><p><strong><span>组件结构：</span></strong></p><ul><li><p><span>recommond—container 【背景色，左右边距】，column</span></p><ul><li><p><span>header—row，</span></p><ul><li><span>房屋推荐</span></li><li><span>更多</span></li></ul></li><li><p><span>body— wrap</span></p><ul><li><p><span>Container width— （屏幕宽度-10*3）/2</span></p><ul><li><p><span>item— Row（spacebeteen）</span></p><ul><li><p><span>content— column</span></p><ul><li><span>文案--Text</span></li><li><span>文案--Text</span></li></ul></li><li><p><span>图片— CommonImage</span></p></li></ul></li></ul></li></ul></li></ul></li></ul><p><strong><span>数据准备：</span></strong></p><ol start='' ><li><p><span>准备静态图片</span></p><p><span>    </span><span>-</span><span> static/images/home_index_recommend_1.png</span></p><p><span>    </span><span>-</span><span> static/images/home_index_recommend_2.png</span></p><p><span>    </span><span>-</span><span> static/images/home_index_recommend_3.png</span></p><p><span>    </span><span>-</span><span> static/images/home_index_recommend_4.png</span></p></li><li><p><span>准备数据代码</span></p></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">IndexRecommendItem</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">subTitle</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">imageUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">navigateUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexRecommendItem</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>,<span class="cm-keyword">this</span>.<span class="cm-variable">subTitle</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">imageUri</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">navigateUri</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">IndexRecommendItem</span><span class="cm-operator">&gt;</span> <span class="cm-variable">indexRecommendData</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexRecommendItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'家住回龙观'</span>,<span class="cm-string">'归属的感觉'</span>, <span class="cm-string">'static/images/home_index_recommend_1.png'</span>, <span class="cm-string">'login'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexRecommendItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'宜居四五环'</span>, <span class="cm-string">'大都市生活'</span>,<span class="cm-string">'static/images/home_index_recommend_2.png'</span>, <span class="cm-string">'login'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexRecommendItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'喧嚣三里屯'</span>, <span class="cm-string">'繁华的背后'</span>,<span class="cm-string">'static/images/home_index_recommend_3.png'</span>, <span class="cm-string">'login'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IndexRecommendItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'比邻十号线'</span>,<span class="cm-string">'地铁心连心'</span>, <span class="cm-string">'static/images/home_index_recommend_4.png'</span>, <span class="cm-string">'login'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><p>&nbsp;</p><p>&nbsp;</p><h3><a name="418-首页-tabindex-推荐-编码-主体结构部分" class="md-header-anchor"></a><span>4.18 首页-tabIndex-推荐-编码-主体结构部分</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qogbbjxqj30cm0mygqj.jpg" alt="image-20191014173755745" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>新建文件 pages/home/tab_index/index_recommond_data.dart</span></li><li><span>使用上一节准备好的数据</span></li><li><span>新建文件 pages/home/tab_index/index_recommond.dart</span></li></ol></li><li><p><span>编写核心代码</span></p><ol start='' ><li><span>添加依赖，无状态组件，dataList 参数，indexRecommendData 改成常量</span></li><li><span>添加背景色及边距</span></li><li><span>完善 header 部分</span></li><li><span>添加 wrap </span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="419-首页-tabindex-推荐-编码-item-部分" class="md-header-anchor"></a><span>4.19 首页-tabIndex-推荐-编码-item 部分</span></h3><p><span> </span><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7xvicgqg7j30cm0myq8e.jpg" alt="image-20191014174845620" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>新建文件 pages/home/tab_index/index_recommond_item_widget.dart</span></li><li><span>添加依赖，无状态组件,data 参数，</span></li><li><span>编写主体结构</span></li><li><span>使用并测试</span></li><li><span>完善细节</span></li></ol><h3><a name="420-首页-tabindex-资讯-准备" class="md-header-anchor"></a><span>4.20 首页-tabIndex-资讯-准备</span></h3><p><strong><span>分析：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qok9zdugj30cm0myafz.jpg" alt="image-20191015153023331" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7yx1hfyarj30cm0mydmm.jpg" alt="image-20191015152719582" style="zoom:50%;">
</div><p>&nbsp;</p><p><strong><span>组件结构：</span></strong></p><ul><li><p><span>info— Column</span></p><ul><li><p><span>header - container</span></p><ul><li><span>title— Text</span></li></ul></li><li><p><span>body</span></p><ul><li><span>InfoItemWidget</span></li><li><span>InfoItemWidget</span></li><li><span>InfoItemWidget</span></li><li><span>...</span></li></ul></li></ul></li></ul><p>&nbsp;</p><ul><li><p><span>InfoItemWidget —container</span></p><ul><li><p><span>内容区-- Row</span><span>	</span></p><ul><li><p><span>图片— CommonImage</span></p></li><li><p><span>文字区—</span><strong><span>Expand</span></strong><span>, Column</span></p><ul><li><p><strong><span>titile— container</span></strong></p><ul><li><span>title 内容— Text</span></li></ul></li><li><p><span>信息区— row</span></p><ul><li><span>来源— Text</span></li><li><span>时间— Text</span></li></ul></li></ul></li></ul></li></ul></li></ul><p><strong><span>注意：</span></strong></p><ol start='' ><li><span>文字区域可能随屏幕宽度而改变</span></li><li><span>title 自动换行问题</span></li></ol><p><strong><span>数据准备：</span></strong></p><ol start='' ><li><span>准备数据代码</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">InfoItem</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">imageUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">source</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">time</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">navigateUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">InfoItem</span>({<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">imageUri</span>,<span class="cm-keyword">this</span>.<span class="cm-variable">source</span>,<span class="cm-keyword">this</span>.<span class="cm-variable">time</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">navigateUri</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">InfoItem</span><span class="cm-operator">&gt;</span> <span class="cm-variable">infoData</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">InfoItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>:<span class="cm-string">'置业选择 | 安贞西里 三室一厅 河间的古雅别院'</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">imageUri</span>:<span class="cm-string">'https://wx2.sinaimg.cn/mw1024/005SQLxwly1g6f89l4obbj305v04fjsw.jpg'</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">source</span>:<span class="cm-string">"新华网"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">time</span>:<span class="cm-string">"两天前"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">navigateUri</span>:<span class="cm-string">'login'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">InfoItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>:<span class="cm-string">'置业佳选 | 大理王宫 苍山洱海间的古雅别院'</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">imageUri</span>:<span class="cm-string">'https://wx2.sinaimg.cn/mw1024/005SQLxwly1g6f89l6hnsj305v04fab7.jpg'</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">source</span>:<span class="cm-string">"新华网"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">time</span>:<span class="cm-string">"一周前"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">navigateUri</span>:<span class="cm-string">'login'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">InfoItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>:<span class="cm-string">'置业选择 | 安居小屋 花园洋房 清新别野'</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">imageUri</span>:<span class="cm-string">'https://wx4.sinaimg.cn/mw1024/005SQLxwly1g6f89l5jlyj305v04f75q.jpg'</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">source</span>:<span class="cm-string">"新华网"</span> ,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">time</span>:<span class="cm-string">"一周前"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">navigateUri</span>:<span class="cm-string">'login'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 858px;"></div><div class="CodeMirror-gutters" style="display: none; height: 858px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="421-首页-tabindex-资讯-编码-主体结构" class="md-header-anchor"></a><span>4.21 首页-tabIndex-资讯-编码-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7yxvmmrwej30cm0my77w.jpg" alt="image-20191015155617687" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>添加文件 /pages/home/info/data.dart</span></li><li><span>添加上一节数据到 data.dart </span></li><li><span>添加文件 /pages/home/info/index.dart</span></li><li><span>在 index.dart 添加 material 依赖</span></li><li><span>添加无状态组件</span></li></ol></li><li><p><span>编写核心代码</span></p><ol start='' ><li><span>完善 title 部分—</span><strong><span>注意 title 部分根据参数显示或隐藏</span></strong></li><li><span>完善 body 部分</span></li></ol></li><li><p><span>测试</span></p></li></ol><p><strong><span>注意：</span></strong></p><ol start='' ><li><span>Container alignment 的使用</span></li><li><span>可以通过以下方式修改 dart 版本</span></li></ol><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7yy4ccymnj3077029jri.jpg" referrerpolicy="no-referrer" alt="image-20191015160440388"></p><h3><a name="422-首页-tabindex-资讯-编码-item部分" class="md-header-anchor"></a><span>4.22 首页-tabIndex-资讯-编码-item部分</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7yzperje9j30cm0mygru.jpg" alt="image-20191015165929042" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>创建文件 /pages/home/info/item_widget.dart</span></li><li><span>引入依赖，编写无状态组件，添加 data 参数</span></li><li><span>完成主体结构</span></li><li><span>测试代码</span></li><li><span>完善细节</span></li></ol><p>&nbsp;</p><h3><a name="423-首页-tabinfo" class="md-header-anchor"></a><span>4.23 首页-tabInfo</span></h3><p><strong><span>效果：</span></strong></p><p><span>tabInfo 主体部分可以直接使用 tabIndex 的最新资讯</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7z08pcx3vj30cm0my7bq.jpg" alt="image-20191015171803323" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>新建文件 /pages/home/tab_info/index.dart</span></li><li><span>添加 material 依赖，编写有状态组件</span></li><li><span>完善 header 部分</span></li><li><span>完善body 部分</span></li><li><span>测试</span></li></ol><p>&nbsp;</p><h3><a name="424-首页-tabsearch-分析" class="md-header-anchor"></a><span>4.24 首页-tabSearch-分析</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7z8xhni9bj30ci0ekgpt.jpg" referrerpolicy="no-referrer" alt="image-20191015221840486"></p><p>&nbsp;</p><p><strong><span>结构拆分：</span></strong></p><ul><li><p><span>searchBar — 后续实现</span></p></li><li><p><span>filterBar — 后续实现</span></p></li><li><p><span>RoomListItemWidget— container，row</span></p><ul><li><p><span>commonImage</span></p></li><li><p><span>Expanded，column</span></p><ul><li><p><span>title- container，Text</span></p></li><li><p><span>subtitle- container，Text</span></p></li><li><p><span>tags - SizedBox,Wrap（CommonTag）</span></p></li><li><p><span>price- Text</span></p><p>&nbsp;</p></li></ul></li></ul></li></ul><p><strong><span>数据准备：</span></strong></p><ol start='' ><li><span>数据文件 /pages/home/tab_search/dataList.dart</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">RoomListItemData</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">subTitle</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">imageUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">tags</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">int</span> <span class="cm-variable">price</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">RoomListItemData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  {<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">subTitle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">imageUri</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">tags</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">price</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">id</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">RoomListItemData</span><span class="cm-operator">&gt;</span> <span class="cm-variable">dataList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomListItemData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-string">'朝阳门南大街 2室1厅 8300元'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">subTitle</span>: <span class="cm-string">"二室/114/东|北/朝阳门南大街"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">imageUri</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"https://tva1.sinaimg.cn/large/006y8mN6ly1g6wtu9t1kxj30lo0c7796.jpg"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">price</span>: <span class="cm-number">1200</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">id</span>: <span class="cm-string">'roomDetail/1'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">tags</span>: [<span class="cm-string">"近地铁"</span>, <span class="cm-string">"集中供暖"</span>, <span class="cm-string">"新上"</span>, <span class="cm-string">"随时看房"</span>]),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomListItemData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-string">'整租 · CBD总部公寓二期 临近国贸 精装修 随时拎包入住'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">subTitle</span>: <span class="cm-string">"一室/110/西/CBD总部公寓二期"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">imageUri</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"https://tva1.sinaimg.cn/large/006y8mN6ly1g6wtu5s7gcj30lo0c7myq.jpg"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">price</span>: <span class="cm-number">6000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">id</span>: <span class="cm-string">'roomDetail/1'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">tags</span>: [<span class="cm-string">"近地铁"</span>, <span class="cm-string">"随时看房"</span>]),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomListItemData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-string">'朝阳门南大街 2室1厅 8300元'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">subTitle</span>: <span class="cm-string">"二室/114/东|北/朝阳门南大街"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">imageUri</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"https://tva1.sinaimg.cn/large/006y8mN6ly1g6wtu5s7gcj30lo0c7myq.jpg"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">price</span>: <span class="cm-number">1200</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">id</span>: <span class="cm-string">'roomDetail/1'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">tags</span>: [<span class="cm-string">"近地铁"</span>, <span class="cm-string">"集中供暖"</span>, <span class="cm-string">"新上"</span>, <span class="cm-string">"随时看房"</span>]),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomListItemData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">title</span>: <span class="cm-string">'整租 · CBD总部公寓二期 临近国贸 精装修 随时拎包入住'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">subTitle</span>: <span class="cm-string">"一室/110/西/CBD总部公寓二期"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">imageUri</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">"https://tva1.sinaimg.cn/large/006y8mN6ly1g6wtu9t1kxj30lo0c7796.jpg"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">price</span>: <span class="cm-number">6000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">id</span>: <span class="cm-string">'roomDetail/1'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">tags</span>: [<span class="cm-string">"近地铁"</span>, <span class="cm-string">"随时看房"</span>]),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1352px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1352px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="425-首页-tabsearch-主体结构" class="md-header-anchor"></a><span>4.25 首页-tabSearch-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7zbbiwmn5j30cm0mytbd.jpg" alt="image-20191015234121538" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>创建文件 /pages/home/tab_search/dataList.dart 使用上一节准备的数据</span></li><li><span>创建文件 /pages/home/tab_search/index.dart</span></li><li><span>引入依赖，创建有状态组件</span></li><li><span>编写主体结构</span></li><li><span>测试</span></li></ol><h3><a name="426-首页-tabsearch-item-部分" class="md-header-anchor"></a><span>4.26 首页-tabSearch-item 部分</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7zrwuz5pdj30cm0mygrp.jpg" alt="image-20191016091525346"  /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>创建文件 /widgets/room_list_item_widget.dart</span></li><li><span>引入依赖，创建无状态组件，添加参数 data</span></li><li><span>完成主体结构</span></li><li><span>添加测试</span></li><li><span>完善细节</span></li></ol><p><strong><span>要点:</span></strong></p><p><span>文本 … 的问题</span></p><h3><a name="427-首页-tabsearch-tag-部分" class="md-header-anchor"></a><span>4.27 首页-tabSearch-tag 部分</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7zt76ij91j30cm0mydm2.jpg" alt="image-20191016095957245"  /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>新建文件 widgtes/common_tag.dart</span></li><li><span>引入 material 依赖，添加无状态组件，添加参数 title,color,backgroundColor</span></li><li><span>完成展示效果</span></li><li><span>测试</span></li><li><span>优化参数 使用 factory 工厂构造函数</span></li></ol><p><strong><span>要点：</span></strong></p><p><span>圆角设置，factory 使用</span></p><h3><a name="428-组件-searchbar-封装-分析" class="md-header-anchor"></a><span>4.28 组件 SearchBar 封装-分析</span></h3><p><strong><span>结构分析：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ztf4yxybj30cm0mydmm.jpg" alt="image-20191016100736197" style="zoom: 50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7zteonmzgj30cm0mywko.jpg" alt="image-20191016100710251" style="zoom: 50%;">
   <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g7ztffbu40j30cm0myq51.jpg" alt="image-20191016100753126" style="zoom: 50%;">
</div><p><span></span><strong><span>结论：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g819fgi3xbj30km066gmu.jpg" referrerpolicy="no-referrer" alt="image-20191017160704197"></p><ol start='' ><li><p><span>结构</span></p><ul><li><p><span>SearchBar-Container,Row</span></p><ul><li><span>位置选择按钮</span></li><li><span>返回图标按钮</span></li><li><span>输入框—</span><strong><span>弹性宽度</span></strong></li><li><span>取消文字按钮</span></li><li><span>地图标志按钮</span></li></ul></li></ul></li><li><p><span>参数</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">bool</span> <span class="cm-variable">showLoaction</span>;<span class="cm-comment">//展示位置按钮</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Function</span> <span class="cm-variable">goBackCallback</span>;<span class="cm-comment">//回退按钮函数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">inputValue</span>;<span class="cm-comment">// 搜索框输入值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">defaultInputValue</span>;<span class="cm-comment">// 搜索框默认值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Function</span> <span class="cm-variable">onCancel</span>;<span class="cm-comment">//取消按钮</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">bool</span> <span class="cm-variable">showMap</span>;<span class="cm-comment">//展示地图按钮</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Function</span> <span class="cm-variable">onSearch</span>; <span class="cm-comment">//用户点击搜索框触发</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">ValueChanged</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">onSearchSubmit</span>;<span class="cm-comment">// 用户输入搜索词后，点击键盘的搜索键触发</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>静态资源</span></p><ol start='' ><li><p><span>资源地址 /resource/chapter3/01静态资源/static/icons/widget_search_bar_map.png</span></p></li><li><p><span>拷贝 目标地址 /resource/chapter3/02课堂代码/hook_up_rent/static/icons/widget_search_bar_map.png</span></p></li><li><p><span>在项目配置文件 pubspec.yaml 添加 </span></p><ol start='' ><li><ul><li><span>static/icons/widget_search_bar_map.png</span></li></ul></li></ol></li></ol></li></ol><h3><a name="429-组件-searchbar-封装-主体结构开发" class="md-header-anchor"></a><span>4.29 组件 SearchBar 封装-主体结构开发</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8140sxygdj30kk07qac6.jpg" referrerpolicy="no-referrer" alt="image-20191017125957224"></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>创建文件 /widgets/search_bar/index.dart</span></li><li><span>引入 material 依赖， 创建有状态组件，添加参数</span></li><li><span>编写界面代码</span></li><li><span>测试</span></li><li><span>完善代码</span></li></ol><p><strong><span>要点：</span></strong></p><p><span>在有状态组件中使用参数(titile)方式 </span><code>widget.title</code></p><h3><a name="430-组件-searchbar-封装-完善搜索框" class="md-header-anchor"></a><span>4.30 组件 SearchBar 封装-完善搜索框</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g817omtbu8j30lc06edhc.jpg" referrerpolicy="no-referrer" alt="image-20191017150638762"></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>解决背景色，圆角— Container，TextField.InputDecoration.border=InputBorder.none</span></li><li><span>前置图标 InputDecoration.prefixIcon</span></li><li><span>后置图标 InputDecoration.suffixIcon</span></li><li><span>搜索提示样式 InputDecoration.hintStyle</span></li><li><span>剧中 InputDecoration.contentPadding </span></li><li><span>间距问题 使用 InputDecoration.Icon 替代 InputDecoration.prefixIcon</span></li></ol><h3><a name="431-组件-searchbar-封装-细节完善" class="md-header-anchor"></a><span>4.31 组件 SearchBar 封装-细节完善</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g818qxwsyzj30ko072myv.jpg" referrerpolicy="no-referrer" alt="image-20191017154330658"></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>使用参数 defaultInputValue</span></p></li><li><p><span>使用参数 inputValue</span></p></li><li><p><span>清除按钮逻辑实现</span></p><ol start='' ><li><span>新增状态 _searchWord</span></li><li><span>添加处理函数 _onClean </span></li><li><span>添加并实例化 _controller</span></li><li><span>根据 _searchWord 隐藏清除按钮</span></li></ol></li><li><p><span>添加 TextField.onTap</span></p></li><li><p><span>添加 TextField.onSearchSubmit</span></p></li><li><p><span>添加 TextField.textInputAction: TextInputAction.search</span></p></li><li><p><span>删除 </span><code>|| true</code></p></li></ol><h3><a name="432-组件-searchbar-封装-使用及优化" class="md-header-anchor"></a><span>4.32 组件 SearchBar 封装-使用及优化</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
 <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g819a32oi4j30p819wni2.jpg" alt="image-20191017160154572" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qok321wsj30p819wnl4.jpg" alt="image-20191017160218094" style="zoom:25%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>在 tabIndex 使用</span></p></li><li><p><span>在 tabSearch 使用</span></p></li><li><p><span>在 tabInfo 使用</span></p></li><li><p><span>优化焦点问题</span></p><ol start='' ><li><span>创建焦点对象 FocusNode _focus，并实例化</span></li><li><span>在 TextField 使用焦点对象</span></li><li><span>在 TextField onTap 回掉函数中 通过_focus.unfocus() 方法 是去焦点。</span></li></ol></li></ol><h3><a name="433-首页-tabprofile-分析" class="md-header-anchor"></a><span>4.33 首页-tabProfile-分析</span></h3><p><strong><span>结构分析：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g826io6qqmj30ts0zetnj.jpg" alt="image-20191018111153630" style="zoom: 50%;" /></p><p>&nbsp;</p><p><span>  </span><strong><span>结论：</span></strong></p><ul><li><p><span>tabProfile— scaffold</span></p><ul><li><p><span>appBar</span></p><ul><li><p><span>AppBar，Text</span></p></li><li><p><span>actions</span></p><ul><li><span>IconButton</span></li></ul></li></ul></li><li><p><span>body— ListView</span></p><ul><li><span>Header— 已登陆视图/未登陆视图</span></li><li><span>FunctionButton— 按钮需要使用本地图片</span></li><li><span>Advertisement</span></li><li><span>Info— 已完成组件</span></li></ul></li></ul></li></ul><p><strong><span>数据准备：</span></strong></p><ol start='' ><li><p><span>网络图片</span></p><ol start='' ><li><span>未登陆图片 &quot;</span><a href='https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbgbqv2nj30i20i2wen.jpg' target='_blank' class='url'>https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbgbqv2nj30i20i2wen.jpg</a><span>&quot;</span></li><li><span>已登陆占位图片 &quot;</span><a href='https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbnovh8jj30hr0hrq3l.jpg' target='_blank' class='url'>https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbnovh8jj30hr0hrq3l.jpg</a><span>&quot;</span></li><li><span>广告图片 &#39;</span><a href='https://tva1.sinaimg.cn/large/006y8mN6ly1g6te62n8f4j30j603vgou.jpg' target='_blank' class='url'>https://tva1.sinaimg.cn/large/006y8mN6ly1g6te62n8f4j30j603vgou.jpg</a><span>&#39;</span></li></ol></li><li><p><span>静态资源</span></p><ol start='' ><li><span>资源地址 /resource/chapter3/01静态资源/static/images/home_profile_xxx.png</span></li></ol></li><li><p><span>配置文件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="yaml"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_record.png</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_order.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_favor.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_id.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_message.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_contract.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_house.png</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span>static/images/home_profile_wallet.png</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>列表数据</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:flutter/material.dart'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">FunctionButtonItem</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">imageUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Function</span> <span class="cm-variable">onTapHandle</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">imageUri</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">title</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">onTapHandle</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">FunctionButtonItem</span><span class="cm-operator">&gt;</span> <span class="cm-variable">list</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'static/images/home_profile_record.png'</span>, <span class="cm-string">'看房记录'</span>, <span class="cm-atom">null</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'static/images/home_profile_order.png'</span>, <span class="cm-string">'我的订单'</span>, <span class="cm-atom">null</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'static/images/home_profile_favor.png'</span>, <span class="cm-string">'我的收藏'</span>, <span class="cm-atom">null</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'static/images/home_profile_id.png'</span>, <span class="cm-string">'身份认证'</span>, <span class="cm-atom">null</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'static/images/home_profile_message.png'</span>, <span class="cm-string">'联系我们'</span>, <span class="cm-atom">null</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'static/images/home_profile_contract.png'</span>, <span class="cm-string">'电子合同'</span>, <span class="cm-atom">null</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(<span class="cm-string">'static/images/home_profile_house.png'</span>, <span class="cm-string">'房屋管理'</span>, (<span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">bool</span> <span class="cm-variable">isLogin</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;<span class="cm-comment">//todo:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">isLogin</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Navigator</span>.<span class="cm-variable">pushNamed</span>(<span class="cm-variable">context</span>, <span class="cm-string">'roomManage'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Navigator</span>.<span class="cm-variable">pushNamed</span>(<span class="cm-variable">context</span>, <span class="cm-string">'login'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FunctionButtonItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'static/images/home_profile_wallet.png'</span>, <span class="cm-string">'钱包'</span>, <span class="cm-atom">null</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><p>&nbsp;</p></li></ol><h3><a name="434-首页-tabprofile-主体结构" class="md-header-anchor"></a><span>4.34 首页-tabProfile-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g81j8q3o2jj30p819wgth.jpg" alt="image-20191017214635705" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>添加文件 pages/home/tab_profile/index.dart</span></li><li><span>添加 material 依赖，添加无状态组件</span></li></ol></li><li><p><span>主体结构</span></p><ol start='' ><li><span>使用 Scaffold 搭建主体结构</span></li><li><span>测试效果</span></li></ol></li><li><p><span>完善</span></p><ol start='' ><li><span>完善 appBar 部分</span></li><li><span>完善 body 部分</span></li></ol></li></ol><h3><a name="435-首页-tabprofile-登陆注册-未登陆视图" class="md-header-anchor"></a><span>4.35 首页-tabProfile-登陆注册-未登陆视图</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g81kpphsyrj30l411wtg4.jpg" alt="image-20191017223730869" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g828qdenbtj30l411w461.jpg" alt="image-20191018122830354" style="zoom:50%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>添加文件 pages/home/tab_profile/header.dart</span></li><li><span>添加 material 依赖，添加无状态组件</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>添加背景色和高度</span></li><li><span>添加图片  &quot;</span><a href='https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbgbqv2nj30i20i2wen.jpg' target='_blank' class='url'>https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbgbqv2nj30i20i2wen.jpg</a><span>”</span></li><li><span>添加右侧文字</span></li></ol></li><li><p><span>测试和完善</span></p><ol start='' ><li><span>测试效果</span></li><li><span>完善细节</span></li></ol></li></ol><h3><a name="436-首页-tabprofile-登陆注册-已登陆视图" class="md-header-anchor"></a><span>4.36 首页-tabProfile-登陆注册-已登陆视图</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g828qdenbtj30l411w461.jpg" alt="image-20191018122830354" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>把内容显示部分抽提成函数</span></li><li><span>根据登陆状态使用函数</span></li><li><span>修改已登陆状态函数 &quot;</span><a href='https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbnovh8jj30hr0hrq3l.jpg' target='_blank' class='url'>https://tva1.sinaimg.cn/large/006y8mN6ly1g6tbnovh8jj30hr0hrq3l.jpg</a><span>&quot;</span></li><li><span>测试</span></li></ol><h3><a name="437-首页-tabprofile-功能按钮-主体结构" class="md-header-anchor"></a><span>4.37 首页-tabProfile-功能按钮-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82eh6gafnj30l411wahv.jpg" alt="image-20191018154712289" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>准备静态图片</span></li><li><span>准备数据文件  pages/home/tab_profile/function_button_data.dart</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>新建 pages/home/tab_profile/function_button.dart</span></li><li><span>使用 Wrap 完成主体结构部分 </span></li><li><span>使用 Container 替代 item</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="438-首页-tabprofile-功能按钮-item" class="md-header-anchor"></a><span>4.38 首页-tabProfile-功能按钮-item </span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82eq857cej30l411wqdz.jpg" alt="image-20191018155556471" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>新建 pages/home/tab_profile/function_button_widget.dart</span></li><li><span>引入依赖，添加无状态组件，添加 data 参数</span></li><li><span>完成 Item 主体结构</span></li><li><span>测试</span></li><li><span>完善细节</span></li></ol><h3><a name="439-首页-tabprofile-广告及资讯" class="md-header-anchor"></a><span>4.39 首页-tabProfile-广告及资讯</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g82ew61si7j30l411wqjj.jpg" alt="image-20191018160138846" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>创建文件 pages/home/tab_profile/advertisement.dart</span></li><li><span>引入 material 依赖，添加无状态组件</span></li><li><span>完善主体结构  &#39;</span><a href='https://tva1.sinaimg.cn/large/006y8mN6ly1g6te62n8f4j30j603vgou.jpg' target='_blank' class='url'>https://tva1.sinaimg.cn/large/006y8mN6ly1g6te62n8f4j30j603vgou.jpg</a><span>&#39;</span></li><li><span>测试</span></li><li><span>完善细节</span></li></ol><h3><a name="440-设置页" class="md-header-anchor"></a><span>4.40 设置页</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g872a22ec3j30cm0mygnr.jpg" alt="image-20191022163305038" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g872aihmqjj30cm0mygnv.jpg" alt="image-20191022163331340" style="zoom:50%;">
</div><p>&nbsp;</p><p><strong><span>分析：</span></strong></p><p><span>需要 toast 弹窗，使用 </span><a href='https://github.com/PonnamKarthik/FlutterToast'><span>fluttertoast</span></a></p><p><span>用法：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 1. 安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//fluttertoast: ^3.1.3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 2. 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:fluttertoast/fluttertoast.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 3. 使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Fluttertoast</span>.<span class="cm-variable">showToast</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">msg</span>: <span class="cm-string">"This is Center Short Toast"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">toastLength</span>: <span class="cm-variable">Toast</span>.<span class="cm-variable">LENGTH_SHORT</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">gravity</span>: <span class="cm-variable">ToastGravity</span>.<span class="cm-variable">CENTER</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">timeInSecForIos</span>: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">backgroundColor</span>: <span class="cm-variable">Colors</span>.<span class="cm-variable">red</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">textColor</span>: <span class="cm-variable">Colors</span>.<span class="cm-variable">white</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">fontSize</span>: <span class="cm-number">16.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 416px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>按照依赖 fluttertoast: ^3.1.3</span></li><li><span>utils/common_toast.dart 新建文件，封装 CommonToast</span></li><li><span>新建文件 pages/setting.dart，引入依赖，添加无状态组件</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>完成页面主体结构</span></li><li><span>在路由系统注册当前页面</span></li><li><span>添加</span><code>退出登陆</code><span>按钮</span></li><li><span>实现退出登陆逻辑</span></li></ol></li><li><p><span>测试</span></p><p><span> </span></p></li></ol><h3><a name="441-房屋管理页-主体结构" class="md-header-anchor"></a><span>4.41 房屋管理页-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g874b29tt6j30cm0mywkh.jpg" referrerpolicy="no-referrer" alt="image-20191022174314355"></p><p><strong><span>分析：</span></strong></p><p><a href='https://api.flutter.dev/flutter/material/DefaultTabController-class.html'><span>Tab 的使用</span></a></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">MyDemo</span> <span class="cm-keyword">extends</span> <span class="cm-variable">StatelessWidget</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Tab</span><span class="cm-operator">&gt;</span> <span class="cm-variable">myTabs</span> <span class="cm-operator">=</span> <span class="cm-operator">&lt;</span><span class="cm-variable">Tab</span><span class="cm-operator">&gt;</span>[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Tab</span>(<span class="cm-variable">text</span>: <span class="cm-string">'LEFT'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Tab</span>(<span class="cm-variable">text</span>: <span class="cm-string">'RIGHT'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Widget</span> <span class="cm-variable">build</span>(<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">DefaultTabController</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">length</span>: <span class="cm-variable">myTabs</span>.<span class="cm-variable">length</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">child</span>: <span class="cm-variable">Scaffold</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">appBar</span>: <span class="cm-variable">AppBar</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">bottom</span>: <span class="cm-variable">TabBar</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tabs</span>: <span class="cm-variable">myTabs</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">body</span>: <span class="cm-variable">TabBarView</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">children</span>: <span class="cm-variable">myTabs</span>.<span class="cm-variable">map</span>((<span class="cm-variable">Tab</span> <span class="cm-variable">tab</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">label</span> <span class="cm-operator">=</span> <span class="cm-variable">tab</span>.<span class="cm-variable">text</span>.<span class="cm-variable">toLowerCase</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">Center</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">child</span>: <span class="cm-variable">Text</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">'This is the </span>$<span class="cm-variable">label</span> <span class="cm-string">tab'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">style</span>: <span class="cm-keyword">const</span> <span class="cm-variable">TextStyle</span>(<span class="cm-variable">fontSize</span>: <span class="cm-number">36</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  }).<span class="cm-variable">toList</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 806px;"></div><div class="CodeMirror-gutters" style="display: none; height: 806px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>添加文件 pages/room_manage/index.dart</span></li><li><span>添加 material 依赖，创建无状态组件</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>使用 Scaffold 添加页面主体结构</span></li><li><span>在路由系统注册当前页面</span></li><li><span>添加 tab AppBar.bottom : TabBar()</span></li><li><span>添加 body: TabBarView()</span></li><li><span>在 Scaffold 通过 DefaultTabController 关联 TabBar 和 TabBarView</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="442-房屋管理页-发布按钮" class="md-header-anchor"></a><span>4.42 房屋管理页-发布按钮</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8756r9s6sj30cm0my75n.jpg" alt="image-20191022174314355" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8756d0ocij30cm0myteu.jpg" alt="image-20191022181316816" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g87i4yxwulj30p819w7fd.jpg" alt="image-20191023014100543" style="zoom: 25%;">
<div></div></div><p><strong><span>分析：</span></strong></p><p><span>因为【房源发布】页面也有同样的样式，所以需要封装成组件。组件参数包含 title 和 onTap。</span></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加 floatingActionButton 属性</span></li><li><span>完善发布按钮主体结构 GestureDetector&gt;Container&gt;Center&gt;Text</span></li><li><span>修改 floatingActionButtonLocation</span></li><li><span>完善细节</span></li><li><span>封装组件</span></li></ol><h3><a name="443-发布房源页-分析" class="md-header-anchor"></a><span>4.43 发布房源页-分析</span></h3><p><strong><span>结构分析：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88040g74ij30cm0myq65.jpg" alt="image-20191023120334314" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8804e2n8qj30cm0myq6q.jpg" alt="image-20191023120357814" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88057x6ogj30cm0mytbq.jpg" alt="image-20191023120444638" style="zoom:50%;">
<div>
**结论：**</div></div><ol start='' ><li><span>CommonTitle</span></li><li><span>CommonFormItem</span></li><li><span>CommonRadioFormItem</span></li><li><span>CommonSelectFormItem</span></li><li><span>CommonPicker</span></li><li><span>CommonImagePicker</span></li><li><span>CommonCheckButton</span></li><li><span>RoomAppliance</span></li></ol><h3><a name="444-发布房源页-主体结构" class="md-header-anchor"></a><span>4.44 发布房源页-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g881ddpchrj30cm0my40q.jpg" referrerpolicy="no-referrer" alt="image-20191023124711858"></p><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>创建文件 pages/room_add/index.dart</span></li><li><span>添加 material 依赖，添加有状态组件</span></li><li><span>使用 Scaffold 完成页面主体结构</span></li><li><span>添加 提交按钮</span></li><li><span>在路由中注册该页面</span></li></ol><h3><a name="445-发布房源页-commontitle" class="md-header-anchor"></a><span>4.45 发布房源页-CommonTitle</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g87bf7gl5wj30cm0myacj.jpg" referrerpolicy="no-referrer" alt="image-20191022214925230"></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>创建文件 widgets/common_title.dart</span></li><li><span>添加 material 依赖，添加无状态组件，添加 title 参数</span></li><li><span>完成组件主体内容</span></li><li><span>使用组件</span></li><li><span>完善组件</span></li></ol><h3><a name="446-发布房源页-commonformitem-分析" class="md-header-anchor"></a><span>4.46 发布房源页-CommonFormItem-分析</span></h3><p><strong><span>结构分析：</span></strong></p><p><span>  </span><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88040g74ij30cm0myq65.jpg" alt="image-20191023120334314" style="zoom:100%;" /></p><p><strong><span>结论：</span></strong></p><ul><li><p><span>CommonFormItem</span></p><ul><li><p><span>label</span></p></li><li><p><span>Content</span></p><ul><li><p><span>文本框</span></p><ul><li><span>hintText</span></li><li><span>onChanged</span></li><li><span>controller</span></li></ul></li><li><p><span>尾缀</span></p><ul><li><span>suffix</span></li><li><span>suffixText</span></li></ul></li></ul></li></ul></li></ul><p><strong><span>组件参数：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">label</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Widget</span> <span class="cm-variable">Function</span>(<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) <span class="cm-variable">contentBuilder</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Widget</span> <span class="cm-variable">suffix</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">suffixText</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">hintText</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">ValueChanged</span> <span class="cm-variable">onChanged</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">TextEditingController</span> <span class="cm-variable">controller</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><p><strong><span>使用：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">CommonFormItem</span>(</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">label</span>: <span class="cm-string">'租金'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">hintText</span>: <span class="cm-string">'请输入租金'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">suffixText</span>: <span class="cm-string">'元/月'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">controller</span>: <span class="cm-variable">TextEditingController</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="447-发布房源页-commonformitem-实现" class="md-header-anchor"></a><span>4.47 发布房源页-CommonFormItem-实现</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g87ekzghipj30cm0myq5m.jpg" referrerpolicy="no-referrer" alt="image-20191022233845702"></p><p><strong><span>实现：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='2' ><li><span>创建文件 widgets/common_form_item.dart</span></li><li><span>添加依赖，编写无状态组件，添加并初始化参数</span></li><li><span>使用组件</span></li></ol></li><li><p><span>核心代码</span></p><ol start='' ><li><span>主体结构 实现</span></li><li><span>底线 实现</span></li><li><span>label 实现</span></li><li><span>文本框实现</span></li><li><span>尾缀实现</span></li></ol></li><li><p><span>测试</span></p></li></ol><p>&nbsp;</p><h3><a name="448-发布房源页-commonformitem-实现小区选择" class="md-header-anchor"></a><span>4.48 发布房源页-CommonFormItem-实现小区选择</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g887pocxkrj30p819wdqx.jpg" alt="image-20191023162636281" style="zoom:40%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g887pj280bj30p819w116.jpg" alt="image-20191023162624841" style="zoom:40%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加  CommonFormItem</span></li><li><span>完善 contentBuilder</span></li><li><span>完善 点击事件处理</span></li><li><span>测试</span></li><li><span>优化 CommonFormItem，调整Expanded 位置</span></li></ol><h3><a name="449-发布房源页-commonradioformitem" class="md-header-anchor"></a><span>4.49 发布房源页-CommonRadioFormItem</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g889uqnsn6j30cm0mydj0.jpg" alt="image-20191023174039868" style="zoom:50%;" /></p><p><strong><span>分析：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">label</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">options</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">int</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">ValueChanged</span><span class="cm-operator">&lt;</span><span class="cm-builtin">int</span><span class="cm-operator">&gt;</span> <span class="cm-variable">onChange</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">CommonRadioFormItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">label</span>: <span class="cm-string">'租赁方式'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">options</span>: [<span class="cm-string">'合租'</span>, <span class="cm-string">'整租'</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onChange</span>: (<span class="cm-variable">index</span>) {}),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">CommonRadioFormItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">label</span>: <span class="cm-string">'装修'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">options</span>: [<span class="cm-string">'精装'</span>, <span class="cm-string">'简装'</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onChange</span>: (<span class="cm-variable">index</span>) { }),</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 442px;"></div><div class="CodeMirror-gutters" style="display: none; height: 442px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>新建文件 widgets/common_radio_form_item.dart</span></li><li><span>添加 material 依赖，添加无状态组件，添加并初始化参数</span></li></ol></li><li><p><span>核心代码</span></p><ol start='' ><li><span>使用 CommonFormItem 完成基本结构 label 和 contentBuilder 属性</span></li><li><span>在 roomAdd 页面使用 CommonRadioFormItem</span></li><li><span>完善 contentBuilder</span></li><li><span>处理选项及点击事件 使用 Radio</span></li><li><span>完善细节</span></li></ol></li><li><p><span>测试</span></p><ol start='' ><li><span>让按钮可点击</span></li></ol><p>&nbsp;</p></li></ol><h3><a name="450-发布房源页-commonselectformitem" class="md-header-anchor"></a><span>4.50 发布房源页-CommonSelectFormItem</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88cjj85ojj30cm0mywhu.jpg" referrerpolicy="no-referrer" alt="image-20191023191341672"></p><p><strong><span>分析：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">label</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">int</span> <span class="cm-variable">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">options</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">Function</span>(<span class="cm-builtin">int</span>) <span class="cm-variable">onChange</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//用法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommonSelectFormItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">label</span>: <span class="cm-string">'户型'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onChange</span>: (<span class="cm-variable">val</span>) {},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">options</span>: [<span class="cm-string">'一室'</span>,<span class="cm-string">'二室'</span>,<span class="cm-string">'三室'</span>,<span class="cm-string">'四室'</span>,],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommonSelectFormItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">label</span>: <span class="cm-string">'楼层'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onChange</span>: (<span class="cm-variable">val</span>) {},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">options</span>: [<span class="cm-string">'高楼层'</span>,<span class="cm-string">'中楼层'</span>,<span class="cm-string">'低楼层'</span>,],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommonSelectFormItem</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">label</span>: <span class="cm-string">'朝向'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">value</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onChange</span>: (<span class="cm-variable">val</span>) {},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">options</span>: [<span class="cm-string">'东'</span>,<span class="cm-string">'南'</span>,<span class="cm-string">'西'</span>,<span class="cm-string">'北京'</span>,],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 728px;"></div><div class="CodeMirror-gutters" style="display: none; height: 728px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>新建文件 widgets/common_select_form_item.dart</span></li><li><span>添加 material 依赖，添加无状态组件，添加并初始化参数</span></li></ol></li><li><p><span>核心代码</span></p><ol start='' ><li><span>使用 CommonSelectFormItem 完成基本结构</span></li><li><span>在 roomAdd 页面使用 CommonSelectFormItem</span></li><li><span>完善细节</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="451-发布房源页-commonpicker-分析" class="md-header-anchor"></a><span>4.51 发布房源页-CommonPicker-分析</span></h3><p><strong><span>结构分析：</span></strong>
<span> </span><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88057x6ogj30cm0mytbq.jpg" alt="image-20191023120444638" style="zoom:100%;" /></p><p><strong><span>结论：</span></strong></p><p><span>CommonPicker.showPicker 是一个 class 的静态方法</span></p><p><span>半屏弹窗— </span><a href='https://api.flutter.dev/flutter/cupertino/showCupertinoModalPopup.html'><span>showCupertinoModalPopup</span></a></p><p><span>选择区域— </span><a href='https://api.flutter.dev/flutter/cupertino/CupertinoPicker-class.html'><span>CupertinoPicker</span></a></p><p><strong><span>使用：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">options</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">int</span> <span class="cm-variable">value</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//返回值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Future</span><span class="cm-operator">&lt;</span><span class="cm-builtin">int</span><span class="cm-operator">&gt;</span> <span class="cm-variable">result；</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-builtin">var</span> <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-variable">CommonPicker</span>.<span class="cm-variable">showPicker</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">context</span>: <span class="cm-variable">context</span>, <span class="cm-variable">options</span>: <span class="cm-variable">options</span>, <span class="cm-variable">value</span>: <span class="cm-variable">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">result</span>.<span class="cm-variable">then</span>((<span class="cm-variable">selectedValue</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">value</span> <span class="cm-operator">!=</span> <span class="cm-variable">selectedValue</span> <span class="cm-operator">&amp;&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">selectedValue</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span> <span class="cm-operator">&amp;&amp;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onChange</span> <span class="cm-operator">!=</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">onChange</span>(<span class="cm-variable">selectedValue</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  });</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="452-发布房源页-commonpicker-主体结构" class="md-header-anchor"></a><span>4.52 发布房源页-CommonPicker-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g88057x6ogj30cm0mytbq.jpg" alt="image-20191023120444638" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>新建文件 utils/common_picker/index.dart</span></li><li><span>引入 material 和 cupertino 依赖</span></li><li><span>完善类及静态方法的主体结构</span></li><li><span>在 CommonSelectFormItem 中使用 CommonPicker</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>使用 showCupertinoModalPopup 返回 Future</span></li><li><span>完善内容区 header 部分</span></li><li><span>使用 CupertinoPicker 完善内容区 body 部分</span></li></ol></li><li><p><span>测试及完善</span></p><ol start='' ><li><span>使用 CommonPicker</span></li><li><span>完善细节</span></li></ol></li></ol><h3><a name="453-发布房源页-commonpicker-细节和事件" class="md-header-anchor"></a><span>4.53 发布房源页-CommonPicker-细节和事件</span></h3><p><strong><span>目的：</span></strong></p><p><span>细节：半屏高度</span></p><p><span>事件：  roomAdd — CommonSelectFormItem — CommonPicker 关联</span></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>细节</span></p><ol start='' ><li><span>半屏高度</span></li></ol></li><li><p><span>事件</span></p><ol start='' ><li><span>在 roomAdd  页面添加状态</span></li><li><span>添加事件处理函数</span></li><li><span>完善 CommonSelectFormItem 的事件处理部分</span></li><li><span>完善 CommonPicker 的事件处理部分</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="454-发布房源页-房屋图像-主体结构" class="md-header-anchor"></a><span>4.54 发布房源页-房屋图像-主体结构</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8anfdjkndj30p819wn8i.jpg" alt="image-20191025190120995" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8anhrvynuj30p819w4ci.jpg" alt="image-20191025190339590" style="zoom:33%;">
</div><p><strong><span>分析：</span></strong></p><ol start='2' ><li><p><span>common_image_picker 使用</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1. 参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">ValueChanged</span><span class="cm-operator">&lt;</span><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">File</span><span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">onChange</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2.用法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">CommonImagePicker</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">onChange</span>: (<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">File</span><span class="cm-operator">&gt;</span> <span class="cm-variable">files</span>) {},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre></li><li><p><span>测试图片数据</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">defautImages</span> <span class="cm-operator">=</span> [</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tdgve1j30ku0bsn75.jpg'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2whp87sj30ku0bstec.jpg'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tl1v3bj30ku0bs77z.jpg'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 图片宽750px，高424px；</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">imageWidth</span><span class="cm-operator">=</span><span class="cm-number">750.0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">imageHeight</span><span class="cm-operator">=</span><span class="cm-number">424.0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">imageWidthHeightRatio</span> <span class="cm-operator">=</span> <span class="cm-variable">imageWidth</span> <span class="cm-operator">/</span> <span class="cm-variable">imageHeight</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><p>&nbsp;</p></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>添加文件 widgets/common_image_picker.dart</span></li><li><span>添加 material  依赖，</span></li><li><span>准备测试图片数据</span></li><li><span>创建有状态组件</span></li><li><span>在 roomAdd 页面使用 CommonImagePicker</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>准备图片宽高</span></li><li><span>准备添加图片按钮</span></li><li><span>准备图片 wrapper 函数</span></li><li><span>展示图片及添加按钮</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="455-发布房源页-房屋图像-添加删除" class="md-header-anchor"></a><span>4.55 发布房源页-房屋图像-添加删除</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8au2w250zj30cm0mywjk.jpg" referrerpolicy="no-referrer" alt="image-20191025225136179"></p><p><strong><span>分析：</span></strong></p><ol start='' ><li><p><span>添加— 使用第三方组件 </span><a href='https://pub.dev/packages/image_picker'><span>image_picker</span></a><span> 读取本地图片</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1.安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">image_picker</span>: <span class="cm-variable">^0</span>.<span class="cm-number">6.1</span><span class="cm-operator">+</span><span class="cm-number">4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2. iOS 配置 &lt;project root&gt;/ios/Runner/Info.plist:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-operator">&lt;</span><span class="cm-variable">key</span><span class="cm-operator">&gt;</span><span class="cm-variable">NSCameraUsageDescription</span><span class="cm-operator">&lt;/</span><span class="cm-variable">key</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">&lt;</span><span class="cm-variable">string</span><span class="cm-operator">&gt;</span><span class="cm-variable">Use</span> <span class="cm-variable">to</span> <span class="cm-keyword">get</span> <span class="cm-variable">room</span> <span class="cm-variable">image</span> <span class="cm-operator">&lt;/</span><span class="cm-variable">string</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">&lt;</span><span class="cm-variable">key</span><span class="cm-operator">&gt;</span><span class="cm-variable">NSMicrophoneUsageDescription</span><span class="cm-operator">&lt;/</span><span class="cm-variable">key</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">&lt;</span><span class="cm-variable">string</span><span class="cm-operator">&gt;</span><span class="cm-variable">Use</span> <span class="cm-variable">to</span> <span class="cm-variable">capture</span> <span class="cm-variable">audio</span> <span class="cm-keyword">for</span> <span class="cm-variable">room</span><span class="cm-operator">&lt;/</span><span class="cm-variable">string</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">&lt;</span><span class="cm-variable">key</span><span class="cm-operator">&gt;</span><span class="cm-variable">NSPhotoLibraryUsageDescription</span><span class="cm-operator">&lt;/</span><span class="cm-variable">key</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">&lt;</span><span class="cm-variable">string</span><span class="cm-operator">&gt;</span><span class="cm-variable">Use</span> <span class="cm-variable">to</span> <span class="cm-keyword">get</span> <span class="cm-variable">room</span> <span class="cm-variable">image</span><span class="cm-operator">&lt;/</span><span class="cm-variable">string</span><span class="cm-operator">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3. 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:image_picker/image_picker.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//4. 使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">_pickImage</span>() <span class="cm-keyword">async</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">image</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">ImagePicker</span>.<span class="cm-variable">pickImage</span>(<span class="cm-variable">source</span>: <span class="cm-variable">ImageSource</span>.<span class="cm-variable">gallery</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 468px;"></div><div class="CodeMirror-gutters" style="display: none; height: 468px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>删除 — 图标叠加 使用 Stack</span></p></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>安装 image_picker 依赖</span></li><li><span>引入 image_picker 依赖</span></li></ol></li><li><p><span>核心代码</span></p><ol start='' ><li><p><span>实现添加图片逻辑</span></p><ol start='' ><li><span>添加状态 files</span></li><li><span>图片数据使用 files</span></li><li><span>添加方法 pickImage</span></li><li><span>addButton 添加事件</span></li><li><span>测试</span></li></ol></li><li><p><span>实现图片删除逻辑</span></p><ol start='' ><li><span>添加删除图标</span></li><li><span>实现删除事件</span></li><li><span>测试</span></li></ol></li></ol></li></ol><h3><a name="456-发布房源页-房屋标题描述" class="md-header-anchor"></a><span>4.56 发布房源页-房屋标题描述</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8azo4v64vj30p819w13i.jpg" alt="image-20191026020503437" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>添加房屋标题 </span></p><ol start='' ><li><span>提示文案：请输入标题（例如：整组，小区名 2室 2000元）</span></li></ol></li><li><p><span>添加房屋描述 </span></p><ol start='' ><li><span>提示文案： 请输入房屋描述信息</span></li></ol></li><li><p><span>添加 controller</span></p></li><li><p><span>测试及细节完善</span></p></li></ol><h3><a name="457-发布房源页-房屋配置-分析" class="md-header-anchor"></a><span>4.57 发布房源页-房屋配置-分析</span></h3><p><strong><span>设计图分析：</span></strong></p><p><span> </span><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8804e2n8qj30cm0myq6q.jpg" alt="image-20191023120357814" style="zoom:100%;" /></p><p><strong><span>结论：</span></strong></p><ol start='' ><li><p><span>结构 Wrap </span></p></li><li><p><span>图标，使用字体文件</span></p><ol start='' ><li><p><span>静态文件 /static/fonts/iconfont.ttf</span></p></li><li><p><span>配置文件</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="yaml"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="yaml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  fonts</span><span class="cm-meta">:</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp;  - </span><span class="cm-atom">family</span><span class="cm-meta">: </span>CommonIcon</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-atom"> &nbsp; &nbsp;  fonts</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta"> &nbsp; &nbsp;  - </span><span class="cm-atom">asset</span><span class="cm-meta">: </span>static/fonts/iconfont.ttf</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre></li><li><p><span>字体使用</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//字体的使用</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Icon</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">IconData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">item</span>.<span class="cm-variable">iconPoint</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">fontFamily</span>: <span class="cm-variable">Config</span>.<span class="cm-variable">CommonIcon</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//config.dart</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">Config</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">static</span> <span class="cm-keyword">const</span> <span class="cm-variable">CommonIcon</span> <span class="cm-operator">=</span> <span class="cm-string">'CommonIcon'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><p>&nbsp;</p></li></ol></li><li><p><span>数据</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">RoomApplianceItem</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">int</span> <span class="cm-variable">iconPoint</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">bool</span> <span class="cm-variable">isChecked</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">RoomApplianceItem</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">iconPoint</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">isChecked</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">RoomApplianceItem</span><span class="cm-operator">&gt;</span> <span class="cm-variable">_dataList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'衣柜'</span>, <span class="cm-number">0xe918</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'洗衣机'</span>, <span class="cm-number">0xe917</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'空调'</span>, <span class="cm-number">0xe90d</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'天然气'</span>, <span class="cm-number">0xe90f</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'冰箱'</span>, <span class="cm-number">0xe907</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'暖气'</span>, <span class="cm-number">0xe910</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'电视'</span>, <span class="cm-number">0xe908</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'热水器'</span>, <span class="cm-number">0xe912</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'宽带'</span>, <span class="cm-number">0xe90e</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomApplianceItem</span>(<span class="cm-string">'沙发'</span>, <span class="cm-number">0xe913</span>, <span class="cm-atom">false</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//组件参数 </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">ValueChanged</span><span class="cm-operator">&lt;</span><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">RoomApplianceItem</span><span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">onChange</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>CommonCheckButton 的实现</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:flutter/material.dart'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">CommonCheckButton</span> <span class="cm-keyword">extends</span> <span class="cm-variable">StatelessWidget</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">bool</span> <span class="cm-variable">isChecked</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">CommonCheckButton</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">isChecked</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Key</span> <span class="cm-variable">key</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }) : <span class="cm-keyword">super</span>(<span class="cm-variable">key</span>: <span class="cm-variable">key</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Widget</span> <span class="cm-variable">build</span>(<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">isChecked</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-operator">?</span> <span class="cm-variable">Icon</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Icons</span>.<span class="cm-variable">check_circle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">color</span>: <span class="cm-variable">Colors</span>.<span class="cm-variable">green</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  : <span class="cm-variable">Icon</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Icons</span>.<span class="cm-variable">radio_button_unchecked</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">color</span>: <span class="cm-variable">Colors</span>.<span class="cm-variable">green</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 598px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre></li></ol><p><strong><span>操作：</span></strong></p><ol start='' ><li><span>准备图标</span></li><li><span>创建文件 widgets/room_appliance.dart</span></li><li><span>准备数据</span></li><li><span>准备config 文件</span></li><li><span>CommonCheckButton 实现</span></li></ol><h3><a name="458-发布房源页-房屋配置-实现" class="md-header-anchor"></a><span>4.58 发布房源页-房屋配置-实现</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8804e2n8qj30cm0myq6q.jpg" alt="image-20191023120357814" style="zoom:100%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>添加 material 依赖</span><span>						</span></li><li><span>添加有状态组件</span></li><li><span>添加并初始化参数</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>完成主体结构</span></li><li><span>使用 RoomApplicance</span></li><li><span>添加点击事件</span></li></ol></li><li><p><span>测试&amp;完善</span></p></li></ol><h3><a name="459-房屋详情页-分析" class="md-header-anchor"></a><span>4.59 房屋详情页-分析</span></h3><p><strong><span>设计图分析：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8bytr0d67j30p819w4i4.jpg" alt="image-20191026222110661" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8bytzs3xzj30p819wwz6.jpg" alt="image-20191026222134127" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8byv8a1sdj30p819wnh5.jpg" alt="image-20191026222246341" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8byz39nhsj30p819wtoe.jpg" alt="image-20191026222628499" style="zoom:33%;">
</div><p><strong><span>结论：</span></strong></p><ol start='' ><li><p><span>页面结构</span></p><ol start='' ><li><p><span>主体结构— Scaffold</span></p><ol start='' ><li><p><span>顶部部分 — appBar</span></p></li><li><p><span>内容部分— Stack</span></p><ol start='' ><li><p><span>ListView</span></p><ol start='' ><li><p><span>房屋图片</span></p><ol start='' ><li><span>Swiper</span></li></ol></li><li><p><span>房屋基本信息</span></p><ol start='' ><li><span>标题</span></li><li><span>价格</span></li><li><span>标签</span></li></ol></li><li><p><span>房屋详细信息</span></p><ol start='' ><li><span>面积</span></li><li><span>楼层</span></li><li><span>房型</span></li><li><span>装修</span></li></ol></li><li><p><span>房屋配置</span></p></li><li><p><span>房屋概况</span></p></li><li><p><span>猜你喜欢</span></p></li></ol></li><li><p><span>浮动操作区</span></p><ol start='' ><li><span>收藏</span></li><li><span>联系房东按钮</span></li><li><span>预约看房按钮</span></li></ol></li></ol></li></ol></li></ol></li><li><p><span>房屋数据结构</span></p><p><span> </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">RoomDetailData</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">community</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">subTitle</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-variable">size</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">floor</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-variable">price</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">roomType</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">houseImgs</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">tags</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">oriented</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">applicances</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomDetailData</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">id</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">community</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">subTitle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">size</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">roomType</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">houseImgs</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">tags</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">price</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">floor</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">oriented</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">applicances</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">defaultData</span><span class="cm-operator">=</span><span class="cm-variable">RoomDetailData</span>(<span class="cm-variable">id</span>:<span class="cm-string">'1111'</span>,<span class="cm-variable">title</span>: <span class="cm-string">'整租 中山路 历史最低价'</span>,<span class="cm-variable">community</span>: <span class="cm-string">'中山花园'</span>,<span class="cm-variable">subTitle</span>: <span class="cm-string">'近地铁，附近有商场！'</span>,<span class="cm-variable">size</span>: <span class="cm-number">100</span>,<span class="cm-variable">floor</span>: <span class="cm-string">'高楼层'</span>,<span class="cm-variable">price</span>: <span class="cm-number">3000</span>,<span class="cm-variable">oriented</span>: [<span class="cm-string">'南'</span>],<span class="cm-variable">roomType</span>: <span class="cm-string">'三室'</span>,<span class="cm-variable">applicances</span>:[<span class="cm-string">'衣柜'</span>,<span class="cm-string">'洗衣机'</span>],<span class="cm-variable">tags</span>:[<span class="cm-string">"近地铁"</span>, <span class="cm-string">"集中供暖"</span>, <span class="cm-string">"新上"</span>, <span class="cm-string">"随时看房"</span>],<span class="cm-variable">houseImgs</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tdgve1j30ku0bsn75.jpg'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2whp87sj30ku0bstec.jpg'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">'http://ww3.sinaimg.cn/large/006y8mN6ly1g6e2tl1v3bj30ku0bs77z.jpg'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">]);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1014px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1014px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>分享按钮 </span><a href='https://pub.dev/packages/share'><span>share</span></a></p><p><span> </span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1. 安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">share</span>: <span class="cm-variable">^0</span>.<span class="cm-number">6.3</span><span class="cm-operator">+</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2. 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">import</span> <span class="cm-string">'package:share/share.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3. 使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Share</span>.<span class="cm-variable">share</span>(<span class="cm-string">'check out my website https://example.com'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 234px;"></div><div class="CodeMirror-gutters" style="display: none; height: 234px;"></div></div></div></pre><p>&nbsp;</p></li></ol><h3><a name="460-房屋详情页面-主体结构" class="md-header-anchor"></a><span>4.60 房屋详情页面-主体结构</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8cu2dspbjj30p819wqc8.jpg" alt="image-20191027162209294" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>将RoomDetailPage 转成 有状态组件</span></li><li><span>安装 share 依赖</span></li><li><span>添加 data.dart,并粘贴之前准备的代码</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>完善 appBar 部分主体结构</span></li><li><span>添加分享按钮</span></li><li><span>使用  Stack 完善body的主体结构</span></li><li><span>完善 底部按钮区域</span></li></ol></li><li><p><span>测试&amp;完善细节</span></p><ol start='' ><li><span>修改 widgets/room_list_item_widget.dart 添加点击事件</span></li><li><span>修改 pages/home/tab_search/dataList.dart 修改id</span></li><li><span>测试</span></li></ol></li></ol><h3><a name="461房屋详情页面-底部按钮" class="md-header-anchor"></a><span>4.61房屋详情页面-底部按钮</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8cum08jihj30p819wqdo.jpg" alt="image-20191027164103701" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加收藏按钮</span></li><li><span>添加‘联系房东’ 按钮</span></li><li><span>添加’预约看房’按钮</span></li><li><span>添加收藏事件及展示</span></li><li><span>测试</span></li></ol><h3><a name="462-房屋详情页面-房屋图片房屋基本信息" class="md-header-anchor"></a><span>4.62 房屋详情页面-房屋图片&amp;房屋基本信息</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qogjo9o9j30p819wwvp.jpg" alt="image-20191027182706325" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加 图片</span></li><li><span>添加 价格</span></li><li><span>添加 标签</span></li><li><span>添加 分割线</span></li><li><span>测试</span></li></ol><h3><a name="463-房屋详情页面-房屋详细信息" class="md-header-anchor"></a><span>4.63 房屋详情页面-房屋详细信息</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qohkqqvpj30p819wtuc.jpg" alt="image-20191027201641436" style="zoom:50%;" /></p><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加 Container Wrap 结构</span></li><li><span>实现【面积】部分</span></li><li><span>重构组件</span></li><li><span>实现 【楼层】【房型】【装修】</span></li><li><span>测试</span></li></ol><h3><a name="464-房屋详情页面-房屋配置" class="md-header-anchor"></a><span>4.64 房屋详情页面-房屋配置</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8d13ytdm8j30p819w4h1.jpg" alt="image-20191027202554492" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8804e2n8qj30cm0myq6q.jpg" alt="image-20191023120357814" style="zoom:50%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>打开文件 /widgets/room_appliance.dart</span></li><li><span>创建 无状态组件 RoomApplianceList</span></li><li><span>添加并初始化参数 final List</span><String><span> list;</span></li><li><span>完善内容部分</span></li><li><span>在 /pages/room_detail/index.dart 使用 RoomApplianceList</span></li><li><span>完善细节</span></li><li><span>测试</span></li></ol><h3><a name="465-房屋详情页面-房屋概况猜你喜欢" class="md-header-anchor"></a><span>4.65 房屋详情页面-房屋概况&amp;猜你喜欢</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qogu8mdnj30p819w4i8.jpg" alt="image-20191028182158254" style="zoom:50%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加 container 和 container.padding,Column</span></li><li><span>添加 Text 用于显示 房屋概况</span></li><li><span>添加按钮区域（收起/举报）</span></li><li><span>添加状态 showAllText=false 和 showTextTool 变量。</span></li><li><span>根据 showAllText 和 showTextTool 显示相应内容</span></li><li><span>添加事件控制 showAllText；</span></li><li><span>添加 Info()</span></li></ol><h3><a name="466-filterbar-分析" class="md-header-anchor"></a><span>4.66 filterBar-分析</span></h3><p><strong><span>结构分析：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8e3fzn31aj30p819wqog.jpg" alt="image-20191028183213292" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8e3fjz0xjj30p819wh22.jpg" alt="image-20191028183147814" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8e3h64007j30p819w4av.jpg" alt="image-20191028183321054" style="zoom:25%;">
</div><p><strong><span>结论：</span></strong></p><ol start='' ><li><p><span>结构</span></p><ul><li><p><span>filterBar— Row</span></p><ul><li><span>区域--Item</span></li><li><span>方式--item</span></li><li><span>租金--item</span></li><li><span>筛选--item</span></li></ul></li><li><p><span>Picker选择器 — CommonPicker</span></p></li><li><p><span>筛选选择器 — Drawer</span></p></li></ul></li><li><p><span>组件参数</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ValueChanged</span><span class="cm-operator">&lt;</span><span class="cm-variable">FilterBarResult</span><span class="cm-operator">&gt;</span> <span class="cm-variable">onChange</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre><p>&nbsp;</p></li></ol><p><strong><span>数据及结构：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// pages/home/tab_search/filter_bar/data.dart</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//结果数据类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> &nbsp;<span class="cm-variable">FilterBarResult</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">areaId</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">priceId</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">rentTypeId</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">moreIds</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">FilterBarResult</span>({<span class="cm-keyword">this</span>.<span class="cm-variable">areaId</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">priceId</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">rentTypeId</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">moreIds</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//通用类型</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">GeneralType</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">name</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">id</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">areaList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'区域1'</span>, <span class="cm-string">'11'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'区域2'</span>, <span class="cm-string">'22'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">priceList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'价格1'</span>, <span class="cm-string">'11'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'价格2'</span>, <span class="cm-string">'22'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">rentTypeList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'出租类型1'</span>, <span class="cm-string">'11'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'出租类型2'</span>, <span class="cm-string">'22'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">roomTypeList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'房屋类型1'</span>, <span class="cm-string">'11'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'房屋类型2'</span>, <span class="cm-string">'22'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">orientedList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'方向1'</span>, <span class="cm-string">'11'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'方向2'</span>, <span class="cm-string">'22'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">floorList</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'楼层1'</span>, <span class="cm-string">'11'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'楼层2'</span>, <span class="cm-string">'22'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1170px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1170px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="467-filterbar-展示区域" class="md-header-anchor"></a><span>4.67 filterBar-展示区域</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8f26zsicyj30cm0my0ys.jpg" referrerpolicy="no-referrer" alt="image-20191029143432400"></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>新建文件  pages/home/tab_search/filter_bar/data.dart，填充数据</span></li><li><span>新建文件 pages/home/tab_search/filter_bar/index.dart</span></li><li><span>引入 material 依赖， 创建</span><strong><span>有</span></strong><span>状态组件，添加并初始化参数</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>编写基本结构，解决外边框样式问题</span></li><li><span>在 tabSearch页面中使用 Filter_bar</span></li><li><span>编写 filterBar 的 item 组件</span></li><li><span>使用 item 组件</span></li></ol></li></ol><h3><a name="468-filterbar-picker-部分" class="md-header-anchor"></a><span>4.68 filterBar-picker 部分</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8f2dyfapgj30cm0my0ym.jpg" alt="image-20191029144113752" style="zoom:67%;" /></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>添加 4 个按钮的激活状态</span></li><li><span>添加 4 个结果值</span></li><li><span>添加 4 响应事件</span></li><li><span>添加 _onChange 方法用于通知 FilterBar 的父组件</span></li><li><span>完成【区域】选择的 picker 部分</span></li><li><span>参照【区域】完成 【方式】和【租金】的 picker 部分</span></li><li><span>【筛选】先使用空白函数</span></li></ol><h3><a name="469-filterbar-drawer-部分-展示部分" class="md-header-anchor"></a><span>4.69 filterBar-drawer 部分-展示部分</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8e3fzn31aj30p819wqog.jpg" alt="image-20191028183213292" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8g4q7o78vj30p819wtjr.jpg" alt="image-20191029181501072" style="zoom: 25%;">
</div><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>创建文件 filter_bar/filter_drawer.dart</span></li><li><span>添加 material 依赖 添加无状态组件</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>实现页面基本结构</span></li><li><span>在 tabSearch页面使用 FiterDrawer</span></li><li><span>实现选项按钮</span></li><li><span>将选项按钮提取成组件 FilterDrawerItem</span></li></ol></li><li><p><span>完善细节</span></p><ol start='' ><li><span>隐藏 Drawer 按钮</span></li><li><span>打开 Drawer</span></li></ol></li></ol><h3><a name="470-filterbar-drawer-部分-数据分析" class="md-header-anchor"></a><span>4.70 filterBar-drawer 部分-数据分析</span></h3><p><strong><span>问题：</span></strong></p><p><span>如何将 Drawer 的数据传递到 FilterBar中来?</span></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8e3fzn31aj30p819wqog.jpg" alt="image-20191028183213292" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8f2dyfapgj30cm0my0ym.jpg" alt="image-20191029144113752" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8g4q7o78vj30p819wtjr.jpg" alt="image-20191029181501072" style="zoom: 25%;">
</div><p><strong><span>分析：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8g6mz60ajj30lm0midgv.jpg" alt="image-20191030135349549" style="zoom:50%;" /></p><p><strong><span>结论：</span></strong></p><p><span>使用全局状态，基于 </span><a href='https://github.com/brianegan/scoped_model'><span>scoped_model</span></a><span> 实现</span></p><p><strong><span>细节：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1. 安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">scoped_model</span>: <span class="cm-variable">^1</span>.<span class="cm-number">0.1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2. 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:scoped_model/scoped_model.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3.使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3.1 创建 model</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">CounterModel</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Model</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-variable">_counter</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-keyword">get</span> <span class="cm-variable">counter</span> <span class="cm-operator">=&gt;</span> <span class="cm-variable">_counter</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">void</span> <span class="cm-variable">increment</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">_counter</span><span class="cm-operator">++</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">notifyListeners</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3.2 在根组件外使用 model</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">CounterApp</span> <span class="cm-keyword">extends</span> <span class="cm-variable">StatelessWidget</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Widget</span> <span class="cm-variable">build</span>(<span class="cm-variable">BuildContext</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">ScopedModel</span><span class="cm-operator">&lt;</span><span class="cm-variable">CounterModel</span><span class="cm-operator">&gt;</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">model</span>: <span class="cm-keyword">new</span> <span class="cm-variable">CounterModel</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">child</span>: <span class="cm-keyword">new</span> <span class="cm-variable">Column</span>(<span class="cm-variable">children</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Widget</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Widget</span>(),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3.3 在子组件中获取 model 中的数据/方法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">counter</span> <span class="cm-operator">=</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">ScopedModel</span>.<span class="cm-keyword">of</span><span class="cm-operator">&lt;</span><span class="cm-variable">CounterModel</span><span class="cm-operator">&gt;</span>(<span class="cm-variable">context</span>, <span class="cm-variable">rebuildOnChange</span>: <span class="cm-atom">true</span>).<span class="cm-variable">counter</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">ScopedModel</span>.<span class="cm-keyword">of</span><span class="cm-operator">&lt;</span><span class="cm-variable">CounterModel</span><span class="cm-operator">&gt;</span>(<span class="cm-variable">context</span>, <span class="cm-variable">rebuildOnChange</span>: <span class="cm-atom">true</span>).<span class="cm-variable">increment</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="471-filterbar-drawer-部分-scopedmodel-model" class="md-header-anchor"></a><span>4.71 filterBar-drawer 部分-ScopedModel-model</span></h3><p><strong><span>分析：</span></strong></p><ol start='' ><li><p><span>数据分析</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">_roomTypeList</span> <span class="cm-operator">=</span> [];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">_orientedList</span> <span class="cm-operator">=</span> [];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">_floorList</span> <span class="cm-operator">=</span> [];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Set</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">_selectedList</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Set</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>使用分析</span></p></li></ol><ul><li><p><span>FilterBar 使用</span></p><ul><li><span>添加可选数据列表  set dataList(Map&lt;String, List</span><GeneralType><span>&gt; data) </span></li><li><span>获取选中数据列表 Set</span><String><span> get selectedList</span></li></ul></li><li><p><span>FilterDrawer 使用</span></p><ul><li><span>获取可选数据列表 Map&lt;String, List</span><GeneralType><span>&gt; get dataList </span></li><li><span>添加/删除选中数据列表 selectedListToggleItem(GeneralType data)</span></li></ul></li></ul><p><strong><span>实现：</span></strong></p><ol start='' ><li><span>创建文件 scoped_model/room_filter.dart</span></li><li><span>添加 scoped_model 依赖</span></li><li><span>编写 model 基本结构</span></li><li><span>实现 model 数据结构</span></li><li><span>实现 model 方法</span></li></ol><h3><a name="472-filterbar-drawer-部分-scopedmodelhelper" class="md-header-anchor"></a><span>4.72 filterBar-drawer 部分-ScopedModelHelper</span></h3><p><strong><span>问题：</span></strong></p><p><span>操作 model 首先得获取 model，官方提供获取的方法需要注意 rebuildOnChange: true 参数！</span></p><p><span>能够封装一下？</span></p><p><strong><span>解决：</span></strong></p><p><span>能，自己编写一个 getModel 方法</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//官方 </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ScopedModel</span>.<span class="cm-keyword">of</span><span class="cm-operator">&lt;</span><span class="cm-variable">T</span><span class="cm-operator">&gt;</span>(<span class="cm-variable">context</span>, <span class="cm-variable">rebuildOnChange</span>: <span class="cm-atom">true</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">////////vs/////////</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//自己封装</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">getModel</span><span class="cm-operator">&lt;</span><span class="cm-variable">T</span><span class="cm-operator">&gt;</span>(<span class="cm-variable">context</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>实现：</span></strong></p><ol start='' ><li><span>添加文件 utils/scopoed_model_helper.dart</span></li><li><span>添加 scopedModel 和 material 依赖</span></li><li><span>实现 类的基本结构</span></li><li><span>实现静态方法 getModel</span></li></ol><h3><a name="473-filterbar-drawer-部分-scopedmodel-使用" class="md-header-anchor"></a><span>4.73 filterBar-drawer 部分-ScopedModel-使用</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qogy72cvj30p819wtjr.jpg" alt="image-20191029181501072" style="zoom: 33%;" /></p><p><strong><span>知识回顾</span></strong><span>：</span></p><ol start='' ><li><p><span>有状态组件生命周期 initState— 只执行一次，没有context,或者 context 不完整</span></p></li><li><p><span>有状态组件生命周期 didChangeDependencies 依赖变更后就会执行，有context，会执行多次</span></p></li><li><p><span>一次执行，并且需要 context</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-meta">@override</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">void</span> <span class="cm-variable">initState</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Timer</span>.<span class="cm-variable">run</span>(<span class="cm-variable">_getData</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">initState</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p>&nbsp;</p></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>application 中添加 Model</span></li><li><span>在 FilterBar 的 initState 生命周期 set dataList(Map&lt;String, List</span><String><span>&gt; data) </span></li><li><span>在 FilterBar 的 didChangeDependencies 生命周期 Set</span><String><span> get selectedList</span></li><li><span>在 FilterDrawer 的 build 函数中 Map&lt;String, List</span><GeneralType><span>&gt; get dataList </span></li><li><span>在 FilterDrawer 的 Item 点击事件中 selectedListToggleItem(String data)</span></li><li><span>测试</span></li><li><span>优化</span></li></ol><h2><a name="5-前后端联调" class="md-header-anchor"></a><span>5 前后端联调</span></h2><h3><a name="51-介绍-dio" class="md-header-anchor"></a><span>5.1 介绍 Dio</span></h3><p><strong><span>问题：</span></strong></p><p><span>flutter 中如何发送网络请求？</span></p><p><strong><span>分析：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 通过 httpClient 发送请求 </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">get</span>() <span class="cm-keyword">async</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">httpClient</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HttpClient</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">uri</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Uri</span>.<span class="cm-variable">https</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">'itcast.cn'</span>, <span class="cm-string">'/path1/path2'</span>, {<span class="cm-string">'param1'</span>: <span class="cm-string">'42'</span>, <span class="cm-string">'param2'</span>: <span class="cm-string">'foo'</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">request</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">httpClient</span>.<span class="cm-variable">getUrl</span>(<span class="cm-variable">uri</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">response</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">request</span>.<span class="cm-variable">close</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">responseBody</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">response</span>.<span class="cm-variable">transform</span>(<span class="cm-variable">UTF8</span>.<span class="cm-variable">decoder</span>).<span class="cm-variable">join</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">responseBody</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">////////////////////vs/////////////////////</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//通过 dio</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">get</span>() <span class="cm-keyword">async</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Response</span> <span class="cm-variable">response</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">Dio</span>().<span class="cm-keyword">get</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-string">"https://itcast.cn/path1/path2？param1=42&amp;param2=foo"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">response</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><p><strong><span>结论：</span></strong></p><p><span>使用 </span><a href='https://github.com/flutterchina/dio'><span>dio</span></a><span> 作为 app 的网络请求工具。</span></p><p><span>Dio 对 HttpClient 的封装，增加了一些功能如 拦截器，全局配置，请求取消等。</span></p><p><strong><span>使用：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">dio</span>: <span class="cm-variable">^2</span>.<span class="cm-number">1.6</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">"package:dio/dio.dart"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Dio</span>().<span class="cm-keyword">get</span>(<span class="cm-string">"https://itcast.cn/test"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//其他用法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">BaseOptions</span> <span class="cm-variable">options</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">BaseOptions</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">baseUrl</span>: <span class="cm-string">"https://itcast.cn"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">connectTimeout</span>: <span class="cm-number">1000</span> <span class="cm-operator">*</span> <span class="cm-number">10</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">receiveTimeout</span>: <span class="cm-number">3000</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">extra</span>: {<span class="cm-string">'context'</span>: <span class="cm-variable">context</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Dio</span> <span class="cm-variable">dio</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Dio</span>(<span class="cm-variable">options</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dio</span>.<span class="cm-keyword">get</span>(<span class="cm-string">'/test'</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 442px;"></div><div class="CodeMirror-gutters" style="display: none; height: 442px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="52-封装-diohttp" class="md-header-anchor"></a><span>5.2 封装 DioHttp</span></h3><p><strong><span>问题：</span></strong></p><p><span>dio 的 api 变了，我们需要修改的代码较多；或者后续使用其他组件替代 dio？</span></p><p><strong><span>解决：</span></strong></p><p><span>封装 DioHttp</span></p><p><strong><span>详细分析：</span></strong></p><ol start='' ><li><p><span>内部状态</span></p><ul><li><span>Dio _client;</span></li><li><span>BuildContext context;</span></li></ul></li><li><p><span>初始化</span></p><ul><li><span>static DioHttp of(BuildContext context) </span></li></ul></li><li><p><span>方法</span></p><ul><li><p><span>get</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Future</span><span class="cm-operator">&lt;</span><span class="cm-variable">Response</span><span class="cm-operator">&lt;</span><span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-keyword">get</span>(<span class="cm-builtin">String</span> <span class="cm-variable">path</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  [<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span>, <span class="cm-builtin">String</span> <span class="cm-variable">token</span>]) <span class="cm-keyword">async</span> {}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>post</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Future</span><span class="cm-operator">&lt;</span><span class="cm-variable">Response</span><span class="cm-operator">&lt;</span><span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-variable">post</span>(<span class="cm-builtin">String</span> <span class="cm-variable">path</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  [<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span>, <span class="cm-builtin">String</span> <span class="cm-variable">token</span>]) <span class="cm-keyword">async</span> {}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li><li><p><span>postData</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Future</span><span class="cm-operator">&lt;</span><span class="cm-variable">Response</span><span class="cm-operator">&lt;</span><span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;&gt;&gt;</span> <span class="cm-variable">postFormData</span>(<span class="cm-builtin">String</span> <span class="cm-variable">path</span>,</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  [<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span>, <span class="cm-builtin">String</span> <span class="cm-variable">token</span>]) <span class="cm-keyword">async</span> {}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre></li></ul></li></ol><p><span>  </span></p><p><strong><span>编码：</span></strong></p><ol start='' ><li><span>创建文件 utils/dio_http.dart</span></li><li><span>添加 dio，material 依赖 </span></li><li><span>完成 DioHttp 的基本结构</span></li><li><span>完成 初始化部分</span></li><li><span>完成 get 方法</span></li><li><span>完成 post 方法</span></li><li><span>完成 postData 方法</span></li></ol><p>&nbsp;</p><h3><a name="53-注册页联调" class="md-header-anchor"></a><span>5.3 注册页联调</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8hm8tum7rj30du0o641r.jpg" alt="image-20191031193919114" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8hm985q4tj30cm0myacg.jpg" alt="image-20191031193944213" style="zoom:50%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><a href='http://dev.itcastor.com:3333/'><span>接口文档</span></a><span>分析</span></p></li><li><p><span>打开页面 pages/register.dart</span></p></li><li><p><span>在 _RegisterPageState 添加 3 个 TextEditingController，并赋给 3个 TextField</span></p></li><li><p><span>添加处理函数 _registerHandle() async {},并在注册按钮事件中调用</span></p></li><li><p><span>处理注册逻辑</span></p><ol start='' ><li><span>获取 TextFeild 值</span></li><li><span>处理 输入异常</span></li><li><span>发送网络请求</span></li><li><span>处理异常返回</span></li><li><span>跳转到 登陆页面</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="54-登陆页联调--分析" class="md-header-anchor"></a><span>5.4 登陆页联调--分析</span></h3><p><strong><span>问题：</span></strong></p><ol start='' ><li><span>登陆状态怎么和其他页面同步？</span></li><li><span>再次打开 app ，是否需要二次登陆？</span></li><li><span>登陆过期如何处理？</span></li></ol><p><strong><span>分析：</span></strong></p><ol start='' ><li><span>使用 ScopedModel 同步登陆信息（token）。</span></li><li><span>登陆成功后，将 token 写入本地存储；添加一个app 启动页，app启动的时候，加载token！</span></li><li><span>在 DioHttp 中添加 Dio 拦截器，当登陆过期是，打开登陆页。</span></li></ol><p><strong><span>添加和使用本地缓存：</span></strong></p><p><a href='https://github.com/flutter/plugins/tree/master/packages/shared_preferences'><span>shared_preferences文档</span></a></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">shared_preferences</span>: <span class="cm-variable">^0</span>.<span class="cm-number">5.4</span><span class="cm-operator">+</span><span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:shared_preferences/shared_preferences.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">_incrementCounter</span>() <span class="cm-keyword">async</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">SharedPreferences</span> <span class="cm-variable">prefs</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">SharedPreferences</span>.<span class="cm-variable">getInstance</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-variable">counter</span> <span class="cm-operator">=</span> (<span class="cm-variable">prefs</span>.<span class="cm-variable">getInt</span>(<span class="cm-string">'counter'</span>) <span class="cm-operator">??</span> <span class="cm-number">0</span>) <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">print</span>(<span class="cm-string">'Pressed </span>$<span class="cm-variable">counter</span> <span class="cm-string">times.'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">await</span> <span class="cm-variable">prefs</span>.<span class="cm-variable">setInt</span>(<span class="cm-string">'counter'</span>, <span class="cm-variable">counter</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 286px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><p>&nbsp;</p><h3><a name="55-封装-store" class="md-header-anchor"></a><span>5.5 封装 Store</span></h3><p><strong><span>问题：</span></strong></p><p><span>本地缓存 shared_preferences 的api 可能会变？</span></p><p><strong><span>结论：</span></strong></p><p><span>将 shared_preferences 封装成 store</span></p><p><strong><span>详细分析：</span></strong></p><ol start='' ><li><p><span>内部数据 final SharedPreferences storage;</span></p></li><li><p><span>方法</span></p><ol start='' ><li><span>getString(StoreKeys key) async{}</span></li><li><span>setString(StoreKeys key,String value) async{}</span></li><li><span>getStringList(StoreKeys key) async{}</span></li><li><span>setStringList(StoreKeys key,List</span><String><span> value) async{}</span></li></ol></li></ol><p><strong><span>实现步骤：</span></strong></p><ol start='2' ><li><span>新建文件 /utils/store.dart</span></li><li><span>添加 shared_preferences 依赖</span></li><li><span>编写类的基本结构</span></li><li><span>实现初始化方法</span></li><li><span>实现 getString setString getStringList setStringList</span></li><li><span>添加 storeKeys</span></li></ol><h3><a name="56-实现-authmodel" class="md-header-anchor"></a><span>5.6 实现 AuthModel</span></h3><p><strong><span>分析：</span></strong></p><ol start='' ><li><p><span>内部数据 token</span></p></li><li><p><span>方法</span></p><ol start='' ><li><span>String get token </span></li><li><span>bool get isLogin</span></li><li><span>void initApp(BuildContext context) async {}</span></li><li><span>void login(String token,BuildContext context) {}</span></li><li><span>void logout() </span></li></ol></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>新建文件 scoped_model/auth.dart</span></li><li><span>定义 内部数据 _token</span></li><li><span>实现分析的5个方法/属性</span></li><li><span>在 Application 中使用 AuthModel</span></li></ol><p>&nbsp;</p><h3><a name="57-登陆页联调" class="md-header-anchor"></a><span>5.7 登陆页联调</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jh7csaz3j30cm0mymzl.jpg" alt="image-20191102101557307" style="zoom:50%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>打开页面 pages/login.dart</span></p></li><li><p><span>在 _LoginPageState 添加 2 个 TextEditingController，并赋给 2 个 TextField</span></p></li><li><p><span>添加处理函数 _loginHandle() async {},并在登陆按钮事件中调用</span></p></li><li><p><span>处理登陆逻辑</span></p><ol start='' ><li><span>获取 TextFeild 值</span></li><li><span>处理 输入异常</span></li><li><span>发送网络请求</span></li><li><span>处理异常返回</span></li><li><span>回到上一个路由 </span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="58-使用-authmodel-及退出登陆" class="md-header-anchor"></a><span>5.8 使用 AuthModel 及退出登陆</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jh9r63mrj30cm0myn2u.jpg" alt="image-20191102101818196" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jh7csaz3j30cm0mymzl.jpg" alt="image-20191102101557307" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jhacwkz1j30cm0my449.jpg" alt="image-20191102101852510" style="zoom: 50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jh9c6hu4j30cm0mymze.jpg" alt="image-20191102101754250" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jh9r63mrj30cm0myn2u.jpg" alt="image-20191102101818196" style="zoom:50%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>首页-tabProfile-header 部分使用登陆态</span></li><li><span>首页-tabProfile-房屋管理部分使用登陆态</span></li><li><span>退出登陆逻辑实现</span></li><li><span>测试</span></li></ol><h3><a name="59-完善个人信息" class="md-header-anchor"></a><span>5.9 完善个人信息</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jz1rby7hj30cm0mydln.jpg" alt="image-20191102203321057" style="zoom:50%;" /></p><p><strong><span>分析：</span></strong></p><p><span>可以在登陆成功后，发送网络请求，获取登陆用户的个人信息！</span></p><p><span>将登陆用户的个人信息保存到 AuthModel 中，在 App 内共享。</span></p><p><span>获取个人信息，参考</span><a href='http://dev.itcastor.com:3333/#/user/get_user'><span>接口文档</span></a><span>。</span></p><p><span>Get </span><code>/user</code><span> 需要token</span></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>添加 UserInfo</span></p><ol start='' ><li><p><span>添加 models/user_info.dart</span></p></li><li><p><span>完善 UserInfo 属性</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">avatar</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">gender</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">nickname</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">phone</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">int</span> <span class="cm-variable">id</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>添加工厂构造函数 factory UserInfo.fromJson(Map&lt;String, dynamic&gt; json)</span></p></li></ol></li><li><p><span>在 AuthModel 添加 以下属性/方法</span></p><ol start='' ><li><span>UserInfo _userInfo;</span></li><li><span>UserInfo get userInfo =&gt; _userInfo;</span></li><li><span>_getUserInfo(BuildContext context) async {}</span></li><li><span>在 login/logout 方法中 维护 userInfo</span></li></ol></li><li><p><span>在 pages/home/tab_profile/header.dart 中使用 UserInfo</span></p></li><li><p><span>测试</span></p></li></ol><h3><a name="510-model-生成半自动化" class="md-header-anchor"></a><span>5.10 model 生成半自动化</span></h3><p><strong><span>问题：</span></strong></p><p><span>工厂构造函数代码能否自动生成？</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8jz4zipw6j30g409nmyx.jpg?1" referrerpolicy="no-referrer" alt="image-20191102203629795"></p><p><strong><span>方案：</span></strong></p><p><span>使用 </span><a href='https://github.com/dart-lang/json_serializable'><span>json_serializable</span></a><span> </span></p><p><strong><span>详细用法：</span></strong></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1.安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dependencies</span>: </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">json_annotation</span>: <span class="cm-variable">^3</span>.<span class="cm-number">0.0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dev_dependencies</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">build_runner</span>: <span class="cm-variable">^1</span>.<span class="cm-number">6.7</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">json_serializable</span>: <span class="cm-variable">^3</span>.<span class="cm-number">2.2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2. 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">import</span> <span class="cm-string">'package:json_annotation/json_annotation.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3. 代码准备</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:json_annotation/json_annotation.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">part</span> <span class="cm-string">'user_info.g.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@JsonSerializable</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">UserInfo</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">avatar</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">gender</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">nickname</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">phone</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">int</span> <span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">UserInfo</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">avatar</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">gender</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">nickname</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">phone</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">id</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">factory</span> <span class="cm-variable">UserInfo</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">json</span>) <span class="cm-operator">=&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">_$UserInfoFromJson</span>(<span class="cm-variable">json</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">toJson</span>() <span class="cm-operator">=&gt;</span> <span class="cm-variable">_$UserInfoToJson</span>(<span class="cm-keyword">this</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//4. 执行命令</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">flutter</span> <span class="cm-variable">packages</span> <span class="cm-variable">pub</span> <span class="cm-variable">run</span> <span class="cm-variable">build_runner</span> <span class="cm-variable">build</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 884px;"></div><div class="CodeMirror-gutters" style="display: none; height: 884px;"></div></div></div></pre><p><strong><span>操作：</span></strong></p><ol start='' ><li><span>安装依赖</span></li><li><span>修改 userInfo 代码</span></li><li><span>执行命令</span></li><li><span>测试 @JsonKey(name: &#39;value&#39;)</span></li></ol><h3><a name="511-优化model" class="md-header-anchor"></a><span>5.11 优化model</span></h3><p><strong><span>问题：</span></strong></p><p><span>优化现有 model，方便后面的开发。</span></p><p><strong><span>分析：</span></strong></p><p><span>GeneralType 的使用场景，</span></p><p><span>从</span><a href='http://dev.itcastor.com:3333/#/house/get_houses_condition'><span>接口文档</span></a><span>中看 GeneralType 对应真实的字段。</span></p><p><strong><span>操作：</span></strong></p><ol start='' ><li><p><span>优化 GeneralType</span></p></li><li><p><span>优化 RoomDetailData</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:json_annotation/json_annotation.dart'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">part</span> <span class="cm-string">'room_detail_data.g.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@JsonSerializable</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">RoomDetailData</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'houseCode'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">community</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'description'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">subTitle</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-variable">size</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">floor</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">int</span> <span class="cm-variable">price</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">roomType</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'houseImg'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">houseImgs</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">tags</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">oriented</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'supporting'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">applicances</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">RoomDetailData</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">id</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">community</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">subTitle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">size</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">roomType</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">houseImgs</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">tags</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">price</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">floor</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">oriented</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">applicances</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">factory</span> <span class="cm-variable">RoomDetailData</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">json</span>) <span class="cm-operator">=&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">_$RoomDetailDataFromJson</span>(<span class="cm-variable">json</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">toJson</span>() <span class="cm-operator">=&gt;</span> <span class="cm-variable">_$RoomDetailDataToJson</span>(<span class="cm-keyword">this</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1222px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1222px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>优化 RoomListItemData</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:json_annotation/json_annotation.dart'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">part</span> <span class="cm-string">'room_list_item_data.g.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@JsonSerializable</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">RoomListItemData</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'houseCode'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">title</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'desc'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">subTitle</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'houseImg'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">imageUri</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span> <span class="cm-variable">tags</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">int</span> <span class="cm-variable">price</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-variable">RoomListItemData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  {<span class="cm-keyword">this</span>.<span class="cm-variable">title</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">subTitle</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">imageUri</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">tags</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">price</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">id</span>});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">factory</span> <span class="cm-variable">RoomListItemData</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">json</span>) <span class="cm-operator">=&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">_$RoomListItemDataFromJson</span>(<span class="cm-variable">json</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">toJson</span>() <span class="cm-operator">=&gt;</span> <span class="cm-variable">_$RoomListItemDataToJson</span>(<span class="cm-keyword">this</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>修改引用</span></p></li></ol><h3><a name="512-城市选择器-分析" class="md-header-anchor"></a><span>5.12 城市选择器-分析</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8k2d4vw71j30cm0myn4w.jpg" alt="image-20191102222807503" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8k2cu1e70j30cm0myacr.jpg" alt="image-20191102222750006" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8k4g2su3ej30cm0my10e.jpg" alt="image-20191102234008594" style="zoom:50%;">
</div><p><strong><span>分析：</span></strong></p><ol start='' ><li><span>城市选择使用  </span><a href='https://pub.dev/packages/city_pickers'><span>city_pickers</span></a></li><li><span>需要在本地缓存中 存储 city，需要使用 Store</span></li><li><span>目前仅部分城市可用，在config 中添加可用城市列表</span></li><li><span>多个页面共享当前 city 状态，需要使用 ScopedModel</span></li></ol><p><strong><span>代码准备：</span></strong></p><ol start='' ><li><p><span>使用 </span><a href='https://pub.dev/packages/city_pickers'><span>city_pickers</span></a></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1. 安装依赖</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">city_pickers</span>: <span class="cm-variable">^0</span>.<span class="cm-number">1.28</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2. 引入依赖</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">import</span> <span class="cm-string">'package:city_pickers/city_pickers.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//3. 使用</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">CityPickers</span>.<span class="cm-variable">showCitiesSelector</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">context</span>: <span class="cm-variable">context</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">theme</span>: <span class="cm-keyword">new</span> <span class="cm-variable">ThemeData</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">primaryColor</span>: <span class="cm-variable">Colors</span>.<span class="cm-variable">green</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  ),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-builtin">String</span> <span class="cm-variable">cityName</span> <span class="cm-operator">=</span> <span class="cm-variable">result</span><span class="cm-operator">?</span>.<span class="cm-variable">cityName</span>;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>配置可用 city</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// config.dart</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">static</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">availableCitys</span> <span class="cm-operator">=</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'北京'</span>, <span class="cm-string">'AREA|88cff55c-aaa4-e2e0'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'上海'</span>, <span class="cm-string">'AREA|dbf46d32-7e76-1196'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'深圳'</span>, <span class="cm-string">'AREA|a6649a11-be98-b150'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">GeneralType</span>(<span class="cm-string">'广州'</span>, <span class="cm-string">'AREA|e4940177-c04c-383d'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>编写 CityModel</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//scoped_model/city.dart</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:hook_up_rent/models/general_type.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:scoped_model/scoped_model.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">CityModel</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Model</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span> <span class="cm-variable">_city</span> ;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">set</span> <span class="cm-variable">city</span>(<span class="cm-variable">GeneralType</span> <span class="cm-variable">data</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">_city</span><span class="cm-operator">=</span><span class="cm-variable">data</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">notifyListeners</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">GeneralType</span> <span class="cm-keyword">get</span> <span class="cm-variable">city</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">_city</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  } </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 494px;"></div><div class="CodeMirror-gutters" style="display: none; height: 494px;"></div></div></div></pre><p>&nbsp;</p></li><li><p><span>在 application 中使用 CityModel</span></p></li><li><p><span>Store.StoreKeys 添加 city</span></p></li><li><p><span>在 scoped_model_helper.dart 中 添加 getAreaId 方法</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-keyword">static</span> <span class="cm-builtin">String</span> <span class="cm-variable">getAreaId</span>(<span class="cm-variable">context</span>){</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ScopedModelHelper</span>.<span class="cm-variable">getModel</span><span class="cm-operator">&lt;</span><span class="cm-variable">CityModel</span><span class="cm-operator">&gt;</span>(<span class="cm-variable">context</span>).<span class="cm-variable">city</span><span class="cm-operator">?</span>.<span class="cm-variable">id</span><span class="cm-operator">??</span><span class="cm-variable">Config</span>.<span class="cm-variable">AvailableCitys</span>.<span class="cm-variable">first</span>.<span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p>&nbsp;</p><p>&nbsp;</p></li></ol><h3><a name="513-城市选择器-实现" class="md-header-anchor"></a><span>5.13 城市选择器-实现</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8k2d4vw71j30cm0myn4w.jpg" alt="image-20191102222807503" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8k2cu1e70j30cm0myacr.jpg" alt="image-20191102222750006" style="zoom:50%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8k4g2su3ej30cm0my10e.jpg" alt="image-20191102234008594" style="zoom:50%;">
</div><p><strong><span>分析：</span></strong></p><ol start='' ><li><p><span>点击按钮</span></p></li><li><p><span>弹出城市选择器</span></p></li><li><p><span>选择城市</span></p></li><li><p><span>保存城市</span></p><ol start='' ><li><span>判断城市合法</span></li><li><span>城市保存到 ScopedModel</span></li><li><span>城市保存到 Store</span></li></ol></li><li><p><span>打开app，获取城市</span></p><ol start='' ><li><span>先从 ScopedModel 获取</span></li><li><span>如果前者为空，使用默认值的第一个 ；并从 Store 获取（异步）</span></li></ol></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>打开 widgets/search_bar/index.dart</span></p></li><li><p><span>实现修改城市逻辑</span></p><ol start='' ><li><span>使用 _changeLocation</span></li><li><span>实现 _changeLocation</span></li><li><span>实现 _saveCity</span></li></ol></li><li><p><span>实现获取城市逻辑</span></p><ol start='' ><li><span>使用 _getLocation</span></li><li><span>实现 _getLocation</span></li><li><span>使用 city.name</span></li></ol></li><li><p><span>测试</span></p></li></ol><p>&nbsp;</p><h3><a name="514-联调-filterbar" class="md-header-anchor"></a><span>5.14 联调 FilterBar</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ncetrlqwj30p819wnh0.jpg" alt="image-20191105183211125" style="zoom: 33%;" /></p><p><strong><span>分析：</span></strong></p><p><span>其实就是获取条件数据。</span></p><p><span>接口，参考</span><a href='http://dev.itcastor.com:3333/'><span>接口文档</span></a><span>。</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/houses/condition?id=</span>$<span class="cm-variable">areaId</span><span class="cm-string">'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">areaList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(<span class="cm-variable">data</span>[<span class="cm-string">'area'</span>][<span class="cm-string">'children'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  .<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  .<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">priceList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'price'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">rentTypeList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'rentType'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">roomTypeList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'roomType'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">orientedList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'oriented'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">floorList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'floor'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 390px;"></div><div class="CodeMirror-gutters" style="display: none; height: 390px;"></div></div></div></pre><p><span>	</span></p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>打开文件 pages/home/tab_search/filter_bar/index.dart</span></p></li><li><p><span>核心编码</span></p><ol start='' ><li><span>将filter_bar/data.dart 的数据剪切到 index.dart 作为 6 个 List 状态默认值为[];</span></li><li><span>在 _getData 中获取网上数据并 setState</span></li></ol></li><li><p><span>测试及优化</span></p><ol start='' ><li><span>测试</span></li><li><span>解决数据返回时，组件已卸载掉问题</span></li><li><span>解决城市变更的问题</span></li></ol></li></ol><h3><a name="515-联调找房页" class="md-header-anchor"></a><span>5.15 联调找房页</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qoh45y15j30p819w1gi.jpg" alt="image-20191105215732107" style="zoom:50%;" /></p><p>&nbsp;</p><p><strong><span>分析：</span></strong></p><ol start='' ><li><p><span>需要一个数据列表的状态 List</span><RoomListItemData><span> dataList;</span></p></li><li><p><span>实现 FIlterBar.onChange 的处理逻辑</span></p></li><li><p><span>房屋列表查询接口</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//1. url</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">String</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/houses?cityId='</span> <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string">'</span>$<span class="cm-variable">cityId</span><span class="cm-string">&amp;area=</span>$<span class="cm-variable">area</span><span class="cm-string">&amp;mode=</span>$<span class="cm-variable">mode</span><span class="cm-string">&amp;price=</span>$<span class="cm-variable">price</span><span class="cm-string">&amp;more=</span>$<span class="cm-variable">more</span><span class="cm-string">&amp;start=1&amp;end=20'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//2. 返回数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">resMap</span>[<span class="cm-string">'body'</span>][<span class="cm-string">'list'</span>];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p>&nbsp;</p></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>打开文件 pages/home/tab_search/index.dart</span></p></li><li><p><span>核心代码</span></p><ol start='' ><li><span>添加状态 List</span><RoomListItemData><span> dataList;</span></li><li><span>展示数据使用 dataList；</span></li><li><span>完善 RoomListItemWidget ， 图片地址需要添加 baseUri</span></li><li><span>给 FIlterBar 添加 onChange 参数 _onFilterBarChange(FilterBarResult data) async {}</span></li><li><span>实现 _onFilterBarChange 方法</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="516-房屋详情页" class="md-header-anchor"></a><span>5.16 房屋详情页</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ng6sn3lbj30p819w42u.jpg" alt="image-20191105204257467" style="zoom:50%;" /></p><p><strong><span>分析：</span></strong></p><p><span>进页面就获取数据</span></p><p><span>接口详情：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// url</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/houses/</span>$<span class="cm-variable">roomId</span><span class="cm-string">'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// 数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">resMap</span>[<span class="cm-string">'body'</span>]</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>打开文件 pages/room_detail/index.dart</span></li><li><span>在列表中使用 data；</span></li><li><span>借助 initState 生命周期 执行 _getData</span></li><li><span>实现 _getData() async {} 方法，注意解决图片相对路径问题</span></li><li><span>测试</span></li></ol><h3><a name="517-房屋管理页" class="md-header-anchor"></a><span>5.17 房屋管理页</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8nh1icu57j30p819w7iy.jpg" alt="image-20191105211234993" style="zoom:50%;" /></p><p><strong><span>分析：</span></strong></p><p><span>进页面就获取数据</span></p><p><span>接口详情：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// url</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/user/houses'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">resMap</span>[<span class="cm-string">'body'</span>];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>打开文件 pages/room_manage/index.dart</span></li><li><span>将无状态组件转成有状态组件</span></li><li><span>添加状态List</span><RoomListItemData><span>  availableDataList</span></li><li><span>借助 initState 生命周期 执行 _getData，注意使用延迟执行 _getData</span></li><li><span>实现 _getData() async {} 方法，注意接口需要 token</span></li><li><span>测试</span></li></ol><h3><a name="518-房源发布-分析" class="md-header-anchor"></a><span>5.18 房源发布-分析</span></h3><p><strong><span>结构分析：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8nh3k1oj9j30p819wn96.jpg" alt="image-20191105211432939" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ocdz3blkj30p819w18z.jpg" alt="image-20191106151725583" style="zoom:33%;">
</div><p><strong><span>功能拆分：</span></strong></p><ul><li><p><span>基础数据准备阶段</span></p><ul><li><span>户型列表</span></li><li><span>楼层列表</span></li><li><span>朝向列表</span></li></ul></li><li><p><span>输入信息阶段</span></p><ul><li><span>选择小区</span></li></ul></li><li><p><span>数据提交阶段</span></p><ul><li><span>校验数据</span></li><li><span>上传图片</span></li><li><span>提交数据</span></li></ul></li></ul><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>条件数据准备</span></li><li><span>选择小区逻辑</span></li><li><span>图片上传逻辑</span></li><li><span>数据验证及提交</span></li><li><span>优化</span></li></ol><h3><a name="519-房源发布-条件数据" class="md-header-anchor"></a><span>5.19 房源发布-条件数据</span></h3><p><strong><span>效果：</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8occymkspj30p819w13k.jpg" alt="image-20191106151626499" style="zoom:50%;" /></p><p><strong><span>分析：</span></strong></p><p><span>接口及返回数据</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//url</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/houses/params'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//返回处理</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">res</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">DioHttp</span>.<span class="cm-keyword">of</span>(<span class="cm-variable">context</span>).<span class="cm-keyword">get</span>(<span class="cm-variable">url</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">json</span>.<span class="cm-variable">decode</span>(<span class="cm-variable">res</span>.<span class="cm-variable">toString</span>())[<span class="cm-string">'body'</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">floorList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'floor'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">orientedList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'oriented'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">roomTypeList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">data</span>[<span class="cm-string">'roomType'</span>].<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">GeneralType</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>打开页面 page/room_add/index.dart</span></p></li><li><p><span>添加 3 个状态</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">floorList</span> <span class="cm-operator">=</span> [];</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">orientedList</span> <span class="cm-operator">=</span> [];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">GeneralType</span><span class="cm-operator">&gt;</span> <span class="cm-variable">roomTypeList</span> <span class="cm-operator">=</span> [];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre></li><li><p><span>使用 3 个状态的数据</span></p></li><li><p><span>借助 initState 生命周期，延迟调用 _getParams</span></p></li><li><p><span>实现 _getParams() async {}</span></p></li><li><p><span>测试</span></p></li></ol><h3><a name="520-房源发布-小区选择-主流程" class="md-header-anchor"></a><span>5.20 房源发布-小区选择-主流程</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8nh3k1oj9j30p819wn96.jpg" alt="image-20191105211432939" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8odxpyrbwj30p819wdn6.jpg" alt="image-20191106161057893" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ofzwx9ltj30p819wk30.jpg" alt="image-20191106172219026" style="zoom:25%;">
</div><p><strong><span>分析：</span></strong></p><ol start='' ><li><p><span>页面基本结构</span></p><ul><li><p><span>Scaffold</span></p><ul><li><span>AppBar</span></li><li><span>ListView</span></li></ul></li></ul><p><span>	</span></p></li><li><p><span>准备 Community Model</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-string">'package:json_annotation/json_annotation.dart'</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">part</span> <span class="cm-string">'community.g.dart'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@JsonSerializable</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-variable">Community</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'community'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">id</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-meta">@JsonKey</span>(<span class="cm-variable">name</span>: <span class="cm-string">'communityName'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">final</span> <span class="cm-builtin">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Community</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">id</span>, <span class="cm-keyword">this</span>.<span class="cm-variable">name</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">factory</span> <span class="cm-variable">Community</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>,<span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">json</span>)<span class="cm-operator">=&gt;</span><span class="cm-variable">_$CommunityFromJson</span>(<span class="cm-variable">json</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>,<span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">toJson</span>()<span class="cm-operator">=&gt;</span><span class="cm-variable">_$CommunityToJson</span>(<span class="cm-keyword">this</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Community</span><span class="cm-operator">&gt;</span> <span class="cm-variable">list</span><span class="cm-operator">=</span>[</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Community</span>(<span class="cm-string">'11'</span>,<span class="cm-string">'小区1'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Community</span>(<span class="cm-string">'22'</span>,<span class="cm-string">'小区2'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">Community</span>(<span class="cm-string">'33'</span>,<span class="cm-string">'小区3'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 546px;"></div><div class="CodeMirror-gutters" style="display: none; height: 546px;"></div></div></div></pre></li></ol><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>新建文件  models/community.dart </span></li><li><span>使用数据并执行构建命令</span></li><li><span>新建文件 pages/community_picker.dart</span></li><li><span>添加依赖及有状态组件 CommunityPickerPage</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><p><span>完成页面基本结构</span></p></li><li><p><span>路由注册</span></p></li><li><p><span>在 room_add 页面调用CommunityPickerPage并使用返回值</span></p></li><li><p><span>完善页面 Body 部分</span></p><p><span> </span></p></li></ol></li></ol><h3><a name="521-房源发布-小区选择-细节完善及联调" class="md-header-anchor"></a><span>5.21 房源发布-小区选择-细节完善及联调</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8oh1tzpexj30p819wdrk.jpg" alt="image-20191106175348034" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ogym5y0fj30p819wdnt.jpg" alt="image-20191106175537711" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ogzewm9vj30p819w4a6.jpg" alt="image-20191106175601850" style="zoom:25%;">
</div><p><strong><span>分析：</span></strong></p><ol start='' ><li><p><span>添加 searchBar</span></p></li><li><p><span>小区选择页接口联调</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//接口说明</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">final</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/area/community?name=</span>$<span class="cm-variable">value</span><span class="cm-string">&amp;id=</span>$<span class="cm-variable">areaId</span><span class="cm-string">'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">res</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">DioHttp</span>.<span class="cm-keyword">of</span>(<span class="cm-variable">context</span>).<span class="cm-keyword">get</span>(<span class="cm-variable">url</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">json</span>.<span class="cm-variable">decode</span>(<span class="cm-variable">res</span>.<span class="cm-variable">toString</span>())[<span class="cm-string">'body'</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Community</span><span class="cm-operator">&gt;</span> <span class="cm-variable">dataList</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Community</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">data</span>.<span class="cm-variable">map</span>((<span class="cm-variable">item</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">Community</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">item</span>)).<span class="cm-variable">toList</span>());</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 156px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><p>&nbsp;</p></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>打开文件 pages/community_picker.dart</span></p></li><li><p><span>添加列表状态 List</span><Community><span> dataList = []; 并使用</span></p></li><li><p><span>添加 searchBar</span></p></li><li><p><span>appBar 背景色及隐藏回退按钮</span></p></li><li><p><span>添加并现 SearchBar.onSearchSubmit 方法</span></p></li><li><p><span>测试</span></p><p><span> </span></p></li></ol><h3><a name="522-房源发布-图片上传" class="md-header-anchor"></a><span>5.22 房源发布-图片上传</span></h3><p><strong><span>效果：</span></strong></p><p><span>点击提交，上传图片，上传成功后，把图片通过toast 展示到页面上。</span></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8ocdz3blkj30p819w18z.jpg" alt="image-20191106151725583" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8phuhiy3rj30p819wk7z.jpg" alt="image-20191107151150374" style="zoom:33%;">
</div><p><strong><span>分析：</span></strong></p><ol start='' ><li><span>图片上传函数</span></li></ol><p><span>	</span><span>输入： List</span><File></p><p><span>	</span><span>输出： String imageString ，多张图片地址以 ｜ 隔开</span></p><p><span>	</span><span>函数签名 ：Future</span><String><span> uploadImages(List</span><File><span> files, BuildContext context) async {}</span></p><ol start='2' ><li><span>图片上传接口</span></li></ol><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//准备 formData </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">fromData</span> <span class="cm-operator">=</span> <span class="cm-variable">FormData</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">fromData</span>.<span class="cm-variable">add</span>(<span class="cm-string">"file"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">files</span>.<span class="cm-variable">map</span>((<span class="cm-variable">file</span>) <span class="cm-operator">=&gt;</span> <span class="cm-variable">UploadFileInfo</span>(<span class="cm-variable">file</span>, <span class="cm-string">'picture.jpg'</span>)).<span class="cm-variable">toList</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//准备url</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/houses/image'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//发送请求，处理返回</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">res</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">DioHttp</span>.<span class="cm-keyword">of</span>(<span class="cm-variable">context</span>).<span class="cm-variable">postFormData</span>(<span class="cm-variable">url</span>, <span class="cm-variable">fromData</span>, <span class="cm-variable">token</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">var</span> <span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">json</span>.<span class="cm-variable">decode</span>(<span class="cm-variable">res</span>.<span class="cm-variable">toString</span>())[<span class="cm-string">'body'</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">String</span> <span class="cm-variable">images</span> <span class="cm-operator">=</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span><span class="cm-operator">&gt;</span>.<span class="cm-variable">from</span>(<span class="cm-variable">data</span>).<span class="cm-variable">join</span>(<span class="cm-string">'|'</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>实现图片上传函数</span></p><ol start='' ><li><span>添加文件 utils/upload_images.dart</span></li><li><span>编写函数的主体结构</span></li><li><span>实现函数体</span></li></ol></li><li><p><span>使用图片上传函数</span></p><ol start='' ><li><span>打开 room_add/index.dart</span></li><li><span>添加状态 List</span><File><span> images = [];</span></li><li><span>在 CommonImagePicker.onChange 中 setState</span></li><li><span>添加并使用 _submit() async {} 方法</span></li><li><span>实现 _submit</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="523-房源发布-数据校验及提交" class="md-header-anchor"></a><span>5.23 房源发布-数据校验及提交</span></h3><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8phzuwao2j30p819wwt1.jpg" alt="image-20191107151647017" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8pkqlzxe0j30ks16a42g.jpg" alt="image-20191107165149497" style="zoom:33%;">
<div>
**分析：**</div></div><ol start='' ><li><p><span>数据校验</span></p><p><span>【小区】，【租金】，【大小】 不能为空</span></p></li><li><p><span>接口联调</span></p><p><span>接口说明：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//参数</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Map</span><span class="cm-operator">&lt;</span><span class="cm-builtin">String</span>, <span class="cm-builtin">dynamic</span><span class="cm-operator">&gt;</span> <span class="cm-variable">params</span> <span class="cm-operator">=</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"title"</span>:<span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"description"</span>: <span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"price"</span>: <span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"size"</span>: <span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"oriented"</span>: <span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"roomType"</span>: <span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"floor"</span>:<span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"community"</span>: <span class="cm-string">''</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"houseImg"</span>: <span class="cm-string">''</span>,<span class="cm-comment">//多条以 ｜ 分割</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string">"supporting"</span>: <span class="cm-string">''</span>,<span class="cm-comment">//多条以 ｜ 分割</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//接口url</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">String</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-string">'/user/houses'</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//数据返回</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">res</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable">DioHttp</span>.<span class="cm-keyword">of</span>(<span class="cm-variable">context</span>).<span class="cm-variable">post</span>(<span class="cm-variable">url</span>, <span class="cm-variable">params</span>, <span class="cm-variable">token</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">var</span> <span class="cm-variable">status</span> <span class="cm-operator">=</span> <span class="cm-variable">json</span>.<span class="cm-variable">decode</span>(<span class="cm-variable">res</span>.<span class="cm-variable">toString</span>())[<span class="cm-string">'status'</span>];</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><p>&nbsp;</p></li></ol><p><strong><span>步骤：</span></strong></p><ol start='' ><li><span>打开 room_add/index.dart</span></li><li><span>数据校验逻辑</span></li><li><span>参数准备</span></li><li><span>发送请求并返回</span></li><li><span>测试</span></li><li><span>优化</span></li></ol><h3><a name="524-房源发布-优化" class="md-header-anchor"></a><span>5.24 房源发布-优化</span></h3><p><strong><span>问题1:</span></strong></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8pj53dpiyj30m1026js2.jpg" referrerpolicy="no-referrer" alt="image-20191107155636634"></p><p><strong><span>解决1:</span></strong></p><p><span>如果可选项为空，则不展示对应的选择项</span></p><hr /><p><strong><span>问题2:</span></strong></p><p><span>选择小区时，点击搜索框时，报错</span></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8plfac89lj30os09adjh.jpg" alt="image-20191107171538194" style="zoom:50%;" /></p><p><strong><span>解决2:</span></strong></p><p><span>添加空判断！</span></p><hr /><p><strong><span>问题3:</span></strong><span> </span></p><p><span>【房源发布】页数据提交后，【房屋管理】页列表未更新！</span></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8phzuwao2j30p819wwt1.jpg" alt="image-20191107151647017" style="zoom:33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8pkqlzxe0j30ks16a42g.jpg" alt="image-20191107165149497" style="zoom:33%;">
<div></div></div><p><strong><span>解决3:</span></strong></p><p><span>通过路由传参数解决</span></p><h3><a name="525-登陆过期处理" class="md-header-anchor"></a><span>5.25 登陆过期处理</span></h3><p><strong><span>问题：</span></strong></p><p><span>点击提交无反应！！！</span></p><p><span>  </span><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8phzuwao2j30p819wwt1.jpg" alt="image-20191107151647017" style="zoom:33%;" /></p><p><strong><span>分析：</span></strong></p><ol start='' ><li><span>接口未正常返回应该给予提示</span></li><li><span>处理登陆过期问题。</span></li></ol><p><span>登陆过期是所有需要登陆态接口的通用问题，</span></p><p><span>通过 Dio 的拦截器（Interceptor） 解决。</span></p><p><span>用法：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="dart"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="dart"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Interceptor</span> <span class="cm-variable">interceptor</span> <span class="cm-operator">=</span> <span class="cm-variable">InterceptorsWrapper</span>(<span class="cm-variable">onResponse</span>: (<span class="cm-variable">Response</span> <span class="cm-variable">res</span>) {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">client</span>.<span class="cm-variable">interceptors</span>.<span class="cm-variable">add</span>(<span class="cm-variable">interceptor</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><strong><span>解决：</span></strong></p><ol start='' ><li><p><span>打开 room_add/index.dart 在 _submit 方法中处理未正常返回的情况</span></p></li><li><p><span>解决登陆态过期问题</span></p><ol start='' ><li><span>打开 utils/dio_http.dart</span></li><li><span>添加 interceptor</span></li><li><span>实现 interceptor</span></li><li><span>使用 interceptor</span></li></ol></li><li><p><span>测试</span></p></li></ol><h3><a name="526-添加-flutter-启动页" class="md-header-anchor"></a><span>5.26 添加 flutter 启动页</span></h3><p><strong><span>问题：</span></strong></p><p><span>重启 app 之后，需要重新登陆</span></p><p><strong><span>方案：</span></strong></p><p><span>在启动页处理</span></p><p><span>启动页就是一个普通的页面，延迟 3 秒跳转到首页</span></p><p><strong><span>效果：</span></strong></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qoh9bqtmj30p819wqbp.jpg" alt="image-20191108153505121" style="zoom: 33%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qo5nbsp0j30p819w7p1.jpg" alt="image-20191108153532725" style="zoom:33%;">
</div><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>准备</span></p><ol start='' ><li><span>添加图片资源 - static/images/loading.jpg</span></li><li><span>创建 pages/loading.dart</span></li></ol></li><li><p><span>核心编码</span></p><ol start='' ><li><span>完成页面基本结构</span></li><li><span>实现延迟跳转和调用initApp</span></li><li><span>注册路由</span></li><li><span>在 application.dart中 修改程序入口页面</span></li></ol></li><li><p><span>测试及优化</span></p><ol start='' ><li><p><span>退出登陆 store 未清空问题 — logout 清空 store</span></p></li><li><p><span>loading 页直接跳转到 登陆页问题 — 特殊处理</span></p><p><span> </span></p></li></ol></li></ol><h2><a name="6-构建打包" class="md-header-anchor"></a><span>6 构建打包</span></h2><h3><a name="61-构建打包分析" class="md-header-anchor"></a><span>6.1 构建打包分析</span></h3><p><span>主要包含几部分</span></p><ul><li><p><span>准备</span></p><ul><li><span>桌面图标修改</span></li><li><span>应用名称修改</span></li><li><span>启动图片修改</span></li></ul></li><li><p><span>构建</span></p></li></ul><p><span>资源地址：</span><code>/resource/chapter6/01静态资源/package</code></p><p><span>添加启动页后仍然有明显的白屏！</span></p><div align="left">
    <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qpo42gijj30p819wab5.jpg" alt="image-20191108162756561" style="zoom:25%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qpogs8jwj30p819wqbp.jpg" alt="image-20191108162813406" style="zoom:25%;">
    <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8qo5nbsp0j30p819w7p1.jpg" alt="image-20191108153532725" style="zoom:25%;">
</div><p>&nbsp;</p><h3><a name="62-构建-android-包" class="md-header-anchor"></a><span>6.2 构建 Android 包</span></h3><p><strong><span>效果</span></strong><span>：</span></p><p><span>生成打包文件，能在开启开发模式的手机上运行</span></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8rl57wx5gj30l016kb29.jpg" alt="image-20191109103659224" style="zoom:31%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8rl5rr6i2j30ji13wnpd.jpg" alt="image-20191109103730446" style="zoom:33%;">
</div><p>&nbsp;</p><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>修改应用名称</span></p><p><code>/项目目录/android/app/src/main/AndroidManifest.xml</code><span>    文件 </span><code>application</code><span> 标签 </span><code>android:label</code><span> 属性</span></p></li><li><p><span>修改图标及背景图</span></p><p><span>文件地址：</span><code>/resource/chapter6/01静态资源/package/android/res</code></p><p><span>目标地址：</span><code>/项目目录/android/app/src/main/res</code></p></li><li><p><span>修改构建配置</span></p><p><span>在 </span><code>android/app/build.gradle</code><span> 文件中 </span><code>android.lintOption</code><span> 添加属性 </span><code>checkReleaseBuilds false</code></p></li><li><p><span>构建</span></p><p><span>flutter build apk </span></p></li><li><p><span>查看文件</span></p></li></ol><p>&nbsp;</p><p><span>部分同学构建出现版本问题，参考</span><a href='https://github.com/flutter/flutter/issues/27254'><span>解决方案</span></a></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8rtb22358j318i09aaks.jpg" referrerpolicy="no-referrer" alt="image-20191109151923403"></p><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8rtbsj8wzj31cs0ji76j.jpg" referrerpolicy="no-referrer" alt="image-20191109152002315"></p><h3><a name="63-构建-ios-包" class="md-header-anchor"></a><span>6.3 构建 ios 包</span></h3><p><strong><span>效果</span></strong><span>：</span></p><p><span>生成打包文件，能在开启开发模式的手机上运行（需要 苹果开发者账号 ）</span></p><div align="left">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8rl3an1c4j30jc10s4qp.jpg" alt="image-20191109103508002" style="zoom: 38%;">
  <img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g8rl44se3dj30mg16kgqc.jpg" alt="image-20191109103552033" style="zoom:33%;">
</div><p><strong><span>步骤：</span></strong></p><ol start='' ><li><p><span>修改应用名称 </span></p><p><code>/项目目录/ios/Runner/info.plist</code><span>文件 修改key 为 CFBundleName 的值。</span></p></li><li><p><span>修改图标及背景图</span></p><p><span>文件地址：</span><code>/resource/chapter6/01静态资源/package/ios/Assets.xcassets</code></p><p><span>目标地址：</span><code>/项目目录/Runner/Assets.xcassets</code></p></li><li><p><span>构建</span></p><p><span>flutter build ios</span></p></li><li><p><span>查看文件</span></p><p><span> </span></p></li></ol><h2><a name="7-总结" class="md-header-anchor"></a><span>7 总结</span></h2><ol start='' ><li><p><span>回顾实现的功能/页面</span></p><p><span>实现了完整的登陆注册，添加房源，查找房源，查看房源的功能。</span></p><ul><li><p><span>登陆页</span></p></li><li><p><span>注册页</span></p></li><li><p><span>首页</span></p><ul><li><span>首页tab</span></li><li><span>搜索tab</span></li><li><span>咨询tab</span></li><li><span>我的tab</span></li></ul></li><li><p><span>搜索页</span></p></li><li><p><span>房屋管理</span></p></li><li><p><span>添加房屋</span></p></li><li><p><span>房屋详情</span></p></li><li><p><span>设置</span></p></li></ul></li><li><p><span>回顾项目知识点</span></p><p><strong><span>项目知识点：</span></strong></p><ul><li><p><span>使用第三方组件</span></p></li><li><p><strong><span>通用组件封装</span></strong></p></li><li><p><span>使用静态资源</span><span>	</span></p><ul><li><span>本地图片</span></li><li><span>网络图片</span></li><li><span>使用自带 icon</span></li><li><span>使用字体 icon</span></li><li><span>网络图片缓存超时处理</span></li></ul></li><li><p><span>本地存储及 store 封装</span></p></li><li><p><span>数据管理 scoped_model</span><span>							</span></p></li><li><p><span>网络请求 及 dio_http 封装</span></p></li><li><p><span>序列化及反序列化半自动生成实体类</span></p></li><li><p><span>图片上传</span></p></li><li><p><span>app icon 及 启动页</span></p></li></ul></li><li><p><span>个人感悟</span></p><p><span>技术一直在更新；唯有终身学习，才能让自己保持竞争力！</span></p></li></ol></div>
</body>
</html>